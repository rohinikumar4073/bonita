/**
 * Copyright (C) 2015 Bonitasoft S.A.
 * Bonitasoft, 32 rue Gustave Eiffel - 38000 Grenoble
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2.0 of the License, or
 * (at your option) any later version.
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/asset-popup.html",'<form name=addAsset action={{vm.assetSavingAction}} novalidate ng-submit="vm.saveExternalAsset(vm.newAsset, $event)" ng-upload=vm.onComplete(content)> <div class=modal-header> <h3 class=modal-title ng-if=vm.isNewAsset translate>Add a new asset</h3> <h3 class=modal-title ng-if=!vm.isNewAsset><span translate>Edit asset</span><strong> {{vm.asset.name}}</strong></h3> </div> <div class=modal-body> <div class=form-group> <label class="control-label control-label--required" for=type translate>Type</label> <select name=type ng-model=vm.newAsset.type class=form-control ng-options="type.key as type.value for type in vm.assetTypes" ng-change=vm.updateSavingAction(vm.newAsset.type)></select> </div> <ng-include src=vm.templates[vm.newAsset.type]></ng-include> </div> <div class=modal-footer> <button class="btn btn-primary" ng-disabled="!addAsset.$valid || (vm.isExternalAsset(vm.newAsset) && vm.isExisting(vm.newAsset))"> {{ vm.isNewAsset ? \'Add\': \'Save\' | translate }} </button> <button class="btn btn-link" type=button ng-click=vm.cancel() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/asset-preview-popup.html",'<div> <div class=modal-header> <h3 class=modal-title translate>{{asset.name}} content</h3> </div> <div class=modal-body> <div class="container-fluid text-center"> <iframe ng-src={{url}} width=100% height=98% class=asset-preview-iframe></iframe> </div> </div> <div class=modal-footer> <button class="btn btn-link" type=button ng-click=cancel() translate>Cancel</button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/generic-asset-form.html",'<div class=form-group> <label class="control-label control-label--required" for=source translate>Source</label> <select id=source name=source class=form-control ng-model=vm.newAsset.external ng-disabled=!vm.isNewAsset ng-options="v.key as v.value for (k, v) in vm.assetSources"></select> </div> <div class=form-group ng-if=vm.isExternalAsset(vm.newAsset)> <label class="control-label control-label--required" for=name> <span translate>URL</span> </label> <input type=text name=url ng-model=vm.newAsset.name class=form-control autofocus placeholder=http://.... required ng-pattern=vm.urlPattern> <div class=text-danger ng-if="addAsset.url.$dirty && addAsset.url.$error.pattern"> <i class="fa fa-warning">&nbsp;</i><translate>Invalid URL: it must only contain alphanumeric character or #!:.?+=&%@-/</translate> </div> <div class=text-danger ng-if="addAsset.$dirty && vm.isExisting(vm.newAsset)"> <i class="fa fa-warning">&nbsp;</i><span ng-bind-html=vm.getWarningMessage(vm.newAsset)></span> </div> </div> <div class=form-group ng-if=!vm.isExternalAsset(vm.newAsset)> <label class="control-label control-label--required" for=file> <span translate>File</span> </label> <div class="input-group file-upload"> <input id=file type=text readonly disabled placeholder="{{\'Select your file\' | translate}}" value={{vm.newAsset.name}} class=form-control> <span class=input-group-btn> <span class=btn ng-class="{\'btn-default disabled\':$isUploading, \'btn-primary\':!$isUploading}"> <input class=file-upload-input ng-class="{\'file-upload-input--disabled\':$isUploading}" name=file type=file ng-model=vm.newAsset.name required file-input-change> <i class=fa ng-class="{\'fa fa-spinner fa-pulse\':$isUploading, \'fa-folder\':!$isUploading}"> </i></span> </span> </div> <div class=text-warning ng-if=vm.isExisting(vm.newAsset)> <i class="fa fa-warning">&nbsp;</i><span ng-bind-html=vm.getWarningMessage(vm.newAsset)></span> <br><translate>Click <em>Add</em> to override.</translate> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/help-popup.html",'<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left> <uib-tab heading="{{ \'General\' | translate }}"> <p translate> Assets enable you to add web resources to pages and forms. Available asset types are <strong>JavaScript</strong>, <strong>CSS</strong>, <strong>Image</strong> and (in Subscription editions) <strong>Localization</strong>. Assets can be <strong>Local</strong> (file stored into the page artifact) or External (URL). The Localization asset is always local. </p> <p translate> A local asset name must not contain special characters or spaces. An external asset name must be a standard URL. </p> <p translate ng-if=!isPage> To use the same asset in several pages, you can add it to a custom widget and use this custom widget in your application pages or forms. When you add a custom widget with assets to a page, those assets are automatically linked to the page. </p> </uib-tab> <uib-tab heading="{{ \'Asset use\' | translate }}" ng-if=isPage> <p translate> Add JavaScript assets for custom scripts. They will be loaded and made available at page level. You can use them in variables of type JavaScript expression. In the value field of the variable, simply call the function and pass the required parameters. </p> <p translate> Add CSS assets at page level and use them to edit the CSS classes property of any widget. (UI Designer integrates default Bootstrap style) </p> <p translate> To manage multiple version of dependencies, make sure only one version of an asset is active inside a page. </p> <p translate> To load an image for any custom widget, add image assets at page level. Access it with <code>asset/img/[image name]</code>. </p> <p translate> To use an image asset in the image widget, set the <code>Source type</code> property to <i>Asset</i>, and then enter the image name in the <code>Asset name</code> input field. </p> <p> <translate>To use a localization asset, replace the default localization.json file with a file of the same format containing all the keys in the page and the translations into the target languages. The localization asset is at page level. The format of the file must be:</translate> <pre><code>{\n    "fr-FR": {\n        "Title": "Titre",\n        "Default label": "Libell\xe9 par d\xe9faut",\n        ...\n    },\n    "es-ES": {\n        "Title": "T\xedtulo",\n        "Default label": "Etiqueta por defecto",\n        ...\n    }\n    ...\n}</code></pre> <translate>See the default localization asset for an example.</translate> </p> </uib-tab> <uib-tab heading="{{ \'Asset use\' | translate }}" ng-if=!isPage> <p translate> In a JavaScript asset, you can specify a dependency on an Angular module. First add the JavaScript asset, and then add the module name in the dedicated section. You can find the the available modules on <a href="http://ngmodules.org/">http://ngmodules.org/</a>. </p> <p translate> To load a local image asset in a custom widget, you need to reference it in the template inside a <code>&lt;img&gt;</code> tag with a relative path as follows: <br><code ng-non-bindable>&lt;img src="widgets/[custom widget id]/assets/img/[image name]"&gt;</code> </p> </uib-tab> <uib-tab heading="{{ \'Asset list\' | translate }}" ng-if=isPage> <p translate> The list contains both page assets and the assets of the custom widgets used in this page. </p> <p translate> In the list, you can delete page assets only, view local assets, and edit external assets of a page. </p> <p translate> You can\u2019t manually change the order of assets in a page. </p> <p translate> At runtime, custom widget assets are loaded in alphabetical order of the custom widgets. For each custom widget, the assets are loaded in the order they are listed. Then page assets are loaded. JavaScript and CSS assets are loaded in the page header. </p> <p translate> You cannot have more than one localization asset. When you upload a new asset file, it overwrites the existing one. </p> </uib-tab> <uib-tab heading="{{ \'Asset list\' | translate }}" ng-if=!isPage> <p translate> In this list, you can use the arrows to reorder assets, view local assets, edit external assets, and delete any. </p> <p translate> At runtime, assets of a custom widget are loaded in the order defined. </p> </uib-tab> <uib-tab heading="{{ \'Custom services\' | translate }}"> <p> <translate>To extend a page or form with custom AngularJS services (such as filters, constants, or factories), use the <code>bonitasoft.ui.extensions</code> module.</translate> <br><button ng-click="extensionsExamplesCollapsed = !extensionsExamplesCollapsed" type=button class="btn btn-link" translate>Example: relative time filter</button> </p> <section> <div class=well uib-collapse=!extensionsExamplesCollapsed> <div> <h4 translate>Relative time filter</h4> <p translate> This filter uses the <a href="http://momentjs.com/">moment.js</a> library to transform the display of a relative time. For example, it transforms \'01/01/2011\' to \'4 years ago\'. </p> <p> <ul> <li translate>Import the moment.js library as an external asset.</li> <li> <p translate>Create a JavaScript file named <code>date-ago-filter.js</code> that updates the <code>bonitasoft.ui.extensions</code> module with the filter:</p> <pre><code ng-non-bindable>angular.module(\'bonitasoft.ui.extensions\')\n  .filter(\'dateAgo\', [\'$window\', function ($window) {\n    return function dateAgo(input) {\n      var compar = new Date(input);\n      return $window.moment(compar).fromNow();\n    };\n}]);</code></pre></li> <li translate>Import this JavaScript file as a local page asset.</li> <li translate>Create a JSON variable named <code>updateDate</code> to hold a timestamp as a number</li> <li translate>To display the date in a widget property evaluated as an expression, use the <code>dateAgo</code> filter on the <code>updateDate</code> variable as follows: <code>updateDate | dateAgo</code></li> </ul> </p> </div> </div> </section> </uib-tab> </uib-tabset> </div> <div class=modal-footer> <button class="btn btn-link" ng-click=$dismiss() translate>Close</button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/malformed-json-error-message.html","<p> <strong translate>Malformed json file</strong> <div translate>Asset has not been imported</div> <div translate>Error at line <code>{{ infos.location.line\xa0}}</code>, column <code>{{ infos.location.column }}</code></div> </p> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/page-assets.html",'<div class=DataHeader> <div class=DataHeader-action> <button class="btn btn-default btnAsset--create" ng-click=vm.openAssetPopup() translate>Add a new asset</button> <button class="btn btn-default btn-asset--help" ng-click=vm.openHelp() title="{{\'Open help\' | translate}}"> <i class="fa fa-question-circle"></i> </button> </div> <div class=DataHeader-filter> <label class=sr-only translate> filter: </label> <div class=search-filter> <label class=checkbox-inline ng-repeat="(key, filter) in vm.filters"> <input type=checkbox ng-model=filter.value> {{filter.label}} </label> </div> </div> </div> <table class="table table-condensed table-ui-designer table-striped table-text-ellipsis"> <thead> <th class=col-xs-1 translate>Active</th> <th class=col-xs-6 translate>Name</th> <th class=col-xs-2 translate>Widget</th> <th class=col-xs-1 translate>Type</th> <th class=col-xs-2>&nbsp;</th> </thead> <tbody> <tr ng-class="{\'text-muted\':!asset.active}" ng-repeat="asset in vm.component.assets | orderBy:[\'componentId\',\'order\'] | assetFilter:vm.filters as results"> <td><input type=checkbox ng-model=asset.active ng-click=vm.deactivateAsset(asset)></td> <td>{{asset.name}}</td> <td>{{asset.componentId}}<span ng-if=vm.isPageAsset(asset) translate>Page level</span></td> <td>{{asset.type | assetType}}</td> <td class=text-right> <div class="btn-group link-group btn-group-sm btn-group-bonita-asset"> <button file-download class="btn btn-bonita-asset" href={{vm.getAssetUrl(asset)}} title="{{\'Download asset\' | translate }}" ng-if=!vm.isExternal(asset)> <i class="fa fa-alias-import"></i> </button> <button class="btn btn-bonita-asset" ng-click=vm.openAssetPreviewPopup(asset) title="{{ \'View asset content\' | translate }}" ng-if=!vm.isExternal(asset)> <i class="fa fa-search"></i> </button> <button class="btn btn-bonita-asset" ng-click=vm.openAssetPopup(asset) title="{{ \'Update asset\' | translate }}" ng-if="vm.isPageAsset(asset) && vm.isExternal(asset)"> <i class="fa fa-pencil"></i> </button> <button class="btn btn-bonita-asset" ng-click=vm.delete(asset) title="{{ \'Delete asset\' | translate }}" ng-if=vm.isPageAsset(asset)> <i class="fa fa-trash"></i> </button> </div> </td> </tr> <tr ng-if="results.length===0"> <td colspan=5 translate>No asset</td> </tr> </tbody> </table> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/assets/widget-assets.html",'<table class="table table-striped"> <thead> <tr> <th class=col-xs-8 colspan=2> <h4 class=CustomEditor-section translate>Assets</h4> </th> <th class="col-xs-4 Property-actions" colspan=2> <button class="btn btn-default btn-data--help" ng-click="vm.openHelp(\'widget\')" title="{{\'Open help\' | translate}}"><i class="fa fa-question-circle"></i></button> <button id=addasset title="Add a new asset" class="btn btn-bonita-primary" ng-click=vm.openAssetPopup()> <i class="fa fa-plus"></i> <span translate>Add</span> </button> </th> </tr> <tr> <th class=col-xs-1>&nbsp;</th> <th class=col-xs-7 translate>Name</th> <th class=col-xs-1 translate>Type</th> <th class=col-xs-3>&nbsp;</th> </tr> </thead> <tbody> <tr ng-repeat="asset in vm.component.assets | orderBy:\'order\' as results"> <td> <a ng-click=vm.decrementOrderAsset(asset) ng-if=!$first><i class="fa fa-arrow-up asset-ordering-action clickable"></i></a> <a ng-click=vm.incrementOrderAsset(asset) ng-if=!$last><i class="fa fa-arrow-down asset-ordering-action clickable"></i></a> </td> <td>{{asset.name}}</td> <td>{{asset.type | assetType}}</td> <td class="col-xs-2 Property-actions"> <button file-download class="btn btn-bonita-default" href={{vm.getAssetUrl(asset)}} title="{{\'Download asset\' | translate }}" ng-if=!vm.isExternal(asset)> <i class="fa fa-alias-import"></i> </button> <button class="btn btn-bonita-default" title="{{ \'View asset content\' | translate }}" ng-if=!vm.isExternal(asset) ng-click=vm.openAssetPreviewPopup(asset)><i class="fa fa-search"></i></button> <button class="btn btn-bonita-default" ng-click=vm.openAssetPopup(asset) title="{{ \'Update asset\' | translate }}" ng-if=vm.isExternal(asset)> <i class="fa fa-pencil"></i> </button> <button class="btn btn-bonita-default" ng-click=vm.delete(asset) title="{{ \'Delete asset\' | translate }}"> <i class="fa fa-trash"></i> </button> </td> </tr> <tr ng-if="results.length===0"> <td colspan=4>No asset</td> </tr> </tbody> </table> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/custom-widget/create-property.html",'<div class=modal-header> <h3 class=modal-title ng-if=!paramToUpdate translate>Create new property</h3> <h3 class=modal-title ng-if=paramToUpdate><span translate>Edit property</span> <i>{{ currentParam.name }}</i></h3> </div> <form class=CustomWidgetProperty name=propertyForm ng-submit=ok()> <div class=modal-body> <div class=form-group> <label for=name class="control-label control-label--required" translate>Name</label> &nbsp;<small class=text-muted translate>(used in your template and controller)</small> <input id=name class=form-control name=name ng-model=currentParam.name ng-pattern="\'[a-zA-Z0-9]*$\'" required autofocus> <span ng-if=propertyForm.name.$error.pattern class=text-danger translate>Property names must start with a letter and contain only alphanumeric characters</span> </div> <div class=form-group> <label for=label class="control-label control-label--required" translate>Label</label> &nbsp;<small class=text-muted translate>(displayed in editor\'s property panel)</small> <input id=label class=form-control name=label ng-model=currentParam.label required> </div> <div class=form-group> <label for=help class=control-label translate>Tooltip <i class="fa fa-info-circle" uib-tooltip="{{ \'The tooltip will be display as such, close to the property label.\' | translate}}"></i> </label> <textarea id=help class="EditWidgetPopup-help form-control" name=help ng-model=currentParam.help placeholder="{{ \'Describes the property\' | translate}}">\n        </textarea></div> <div class=form-group> <label for=caption class=control-label translate>Caption</label> <small class="help-block EditWidgetPopup-captionMarginTop">{{\'The caption will be displayed as such below the property label.\' | translate}}</small> <input id=caption class=form-control name=caption ng-model=currentParam.caption placeholder="{{ \'Can be used to define the expected input format\' | translate}}"> </div> <div class=form-group> <label for=bond class="control-label control-label--required" translate>Treat value as</label> <div id=bond class="btn-group CustomWidgetProperty--fullWidth" uib-dropdown> <button id=bondButton type=button class="btn btn-default CustomWidgetProperty--textLeft CustomWidgetProperty--fullWidth" uib-dropdown-toggle> {{bonds[currentParam.bond].name | translate}} <span ng-show="bond !== \'constant\'">-</span> <i class="ui-icon ui-{{currentParam.bond}}"> &nbsp;</i><span class="fa fa-caret-down CustomWidgetProperty-dropdownCaret"></span> </button> <ul class="dropdown-menu CustomWidgetProperty--fullWidth" role=menu aria-labelledby=bondButton> <li ng-repeat="(bond, bondDetails) in bonds" ng-click=updateBond(bond) required role=menuitem><a>{{bondDetails.name | translate}} <span ng-show="bond !== \'constant\'">-</span> <i class="ui-icon ui-{{bond}}"></i></a></li> </ul> </div> <div class=CustomWidgetProperty-treatAsDescription> <small ng-click="bondHelpToggled = !bondHelpToggled" class=clickable> <span ng-if=bondHelpToggled class="fa fa-caret-down"></span><span ng-if=!bondHelpToggled class="fa fa-caret-right"></span> <u>Description</u></small> <div class="col-md-12 row" uib-collapse=!bondHelpToggled> <div><ng-include src=bonds[currentParam.bond].template></ng-include></div> </div> </div> </div> <div class=form-group ng-if=isTypeSelectable()> <label for=type class="control-label control-label--required" translate>Type</label>  <div id=type class="btn-group CustomWidgetProperty--fullWidth" uib-dropdown> <button id=typeButton type=button class="btn btn-default CustomWidgetProperty--textLeft CustomWidgetProperty--fullWidth" uib-dropdown-toggle>{{currentParam.type | translate}} <span class="fa fa-caret-down CustomWidgetProperty-dropdownCaret"></span></button> <ul class="dropdown-menu CustomWidgetProperty--fullWidth" role=menu aria-labelledby=typeButton> <li ng-repeat="type in types" ng-click="currentParam.defaultValue = null" required role=menuitem><a ng-click="currentParam.type = type">{{type | translate}}</a></li> </ul> </div> </div> <div class=form-group ng-if=isTypeChoicable()> <label for=choices class="control-label control-label--required" translate>Choices (comma separated)</label> <input id=choices class=form-control name=choices ng-model=currentParam.choiceValues ng-list required> </div> <div class=form-group ng-if="currentParam.bond !== \'variable\'"> <div ng-switch=currentParam.type> <label for=default class=control-label translate>Default</label> <input id=default class=form-control name=default ng-model=currentParam.defaultValue ng-switch-default> <input id=default type=number class=form-control name=default ng-model=currentParam.defaultValue ng-switch-when=integer> <select id=default class=form-control name=default ng-init="currentParam.defaultValue = true" ng-model=currentParam.defaultValue ng-options="key for key in [true, false]" ng-switch-when=boolean> </select><input id=default type=text class=form-control name=default ng-list ng-model=currentParam.defaultValue ng-switch-when=collection> <select id=default class=form-control name=default ng-model=currentParam.defaultValue ng-switch-when=choice ng-options="choice for choice in currentParam.choiceValues"></select> </div> </div> </div>  <div class=clearfix></div> <div class=modal-footer> <button type=submit class="btn btn-bonita-default" ng-disabled=propertyForm.$invalid ng-click=ok()>{{ (paramToUpdate ? \'Save\' : \'Create\')|translate }}</button> <button type=button class="btn btn-link" ng-click=cancel() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/custom-widget/custom-widget-editor.html",'<div class=EditorHeader role=navigation confirm-on-exit confirm-data=widget> <div class=EditorHeader-menu> <a class=EditorHeader-back ng-click=back() uib-tooltip="{{ \'Back\' | translate }}" tooltip-placement=right tooltip-popup-delay=300> <i class="fa fa-chevron-left"></i> </a> <a ui-sref=designer.home class=EditorHeader-homeNav uib-tooltip="{{ \'Home page\' | translate }}" tooltip-placement=right tooltip-popup-delay=300> <span class=EditorHeader-icon> <i class="ui-icon ui-designer"></i> </span> <strong class=EditorHeader-brand translate> Custom widget editor </strong> </a> <h3 class="EditorHeader-name EditorHeader-name--custom"> <identicon name={{widget.id}} size=30 foreground-color="[203, 213, 225, 255]" background-color=[0,0,0,0]></identicon> {{widget.name}} </h3> <div class=btn-group uib-dropdown> <button id=save type=button class="btn btn-bonita-primary" ng-click=save() translate>Save</button> <button type=button class="btn btn-bonita-primary uib-dropdown-toggle" uib-dropdown-toggle> <span class="fa fa-caret-down"></span> <span class=sr-only>Save</span> </button> <ul class=dropdown-menu role=menu> <li><a id=saveAs class=clickable ng-click=saveAs(widget) translate>Save as ...</a></li> </ul> </div> <button type=button id=export class="btn btn-bonita-primary" ng-click=saveAndExport() title="{{\'Export\'|translate}}"> <i class="ui-icon ui-export"></i> </button> </div> <div class=EditorHeader-help> <button class="btn btn-bonita-help" ng-click=openHelp() title="{{\'Open help\' | translate}}"><i class="fa fa-question-circle"></i></button> </div> </div> <div class="container-fluid CustomEditor"> <div class=row> <div class=col-xs-7> <form id=widget-form name=widgetForm> <div> <h4 class=CustomEditor-section> <translate>Description</translate> <i class="fa fa-info-circle CustomEditor-helper" tooltip-placement=bottom uib-tooltip="{{\'This description will be displayed as a tooltip in the palette\' | translate }}" tooltip-append-to-body=true></i> </h4> <textarea class="form-control textarea--widget" ng-attr-placeholder="{{ \'Widget description\' | translate }}" ng-model=widget.description></textarea> </div> <div> <h4 class=CustomEditor-section translate>Template</h4> <ace-editor class=ace-editor--widget mode=html ng-model=widget.template id=template></ace-editor> </div> <div> <h4 class=CustomEditor-section translate>Controller</h4> <ace-editor class=ace-editor--widget mode=javascript ng-model=widget.controller id=controller></ace-editor> </div> </form> </div> <div class=col-xs-5> <div ui-view=asset></div> <div class=form-group> <h4 class=CustomEditor-section> <translate>Required angular modules</translate> <i class="fa fa-info-circle CustomEditor-helper" uib-tooltip="{{\'Extra angular modules needed by this custom widget (comma separated)\' | translate }}" tooltip-append-to-body=true></i> </h4> <input type=text class=form-control id=requiredModules ng-model=widget.requiredModules ng-list> </div> <table class="table table-striped"> <thead> <th class=col-xs-10> <h4 class=CustomEditor-section translate>Properties</h4> </th> <th class="col-xs-2 Property-actions"> <button id=create title="Create a new property" class="btn btn-bonita-primary" ng-click=createOrUpdate()> <i class="fa fa-plus"></i> <span translate>Create</span> </button> </th> </thead> <tbody> <tr ng-repeat="property in widget.properties"> <td class="col-xs-10 PropertyDescription"> <div class=PropertyName><strong>{{ property.name }}</strong></div> <div><small translate>Label</small>: {{ property.label }}</div> <div><small translate>Treat as </small><span> {{ bonds[property.bond].name | translate }}</span></div> <div><span ng-if=isTypeSelectable(property.bond)><small translate>Type</small>: {{property.type}}</span></div> <div ng-if="property.type === \'choice\'"><small translate>Choices</small>: {{ property.choiceValues.join(\', \') }}</div> <div ng-if="property.bond !== \'variable\'"><small translate>Default value</small>: {{ property.defaultValue }}</div> </td> <td class="col-xs-2 Property-actions"> <button class="btn btn-bonita-default" title="Update property" ng-click=createOrUpdate(property)><i class="fa fa-pencil"></i></button> <button class="btn btn-bonita-default" title="Delete property" ng-click=deleteParam(property)><i class="fa fa-trash"></i></button> </td> </tr> </tbody> </table> </div> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/custom-widget/help-popup.html",'<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left> <uib-tab id=help-general heading="{{ \'General\' | translate }}"> <p translate>If the standard widgets do not meet your needs, you can create a custom widget to match exactly what you want to. After creation, a custom widget is available in the palette for designing pages, forms or fragments.</p> <p translate>Custom widget implementation is based on the AngularJS framework.</p> <p translate>For more information, see the AngularJS guide on <a href=https://docs.angularjs.org/guide/templates>templates</a> and <a href=https://docs.angularjs.org/guide/controller>controllers</a>.</p> <p translate>For the moment, you cannot implement custom widget containers.</p> <p translate>Custom widgets are not clearly visible on the whiteboard but you can see them with the preview.</p> </uib-tab> <uib-tab id=help-template heading="{{ \'Template\' | translate }}"> <p translate>The custom widget HTML template is defined here.</p> <p translate>You can use standard HTML tags and AngularJS built-in directives, scope and interpolation system.</p> <p translate>Custom widget properties defined on the right can be used as variables in a templates with properties.newProperty.</p> <p translate>Functions exposed in the controller can be used with ctrl.newFunction().</p> <p translate>You can use the <i>environment</i> property injected in the scope when inside the whiteboard editor. It allows to create a mockup display for the whiteboard as the real use data will not be available.</p> </uib-tab> <uib-tab id=help-controller heading="{{ \'Controller\' | translate }}"> <p translate>The controller is a JavaScript function that augments the AngularJS scope and exposes functions that can be used in the custom widget template.</p> <p translate>Custom widget properties defined on the right can be used as variables in a controller with $scope.properties.</p> <p translate>To use AngularJS standard services, you must declare them in the main function arguments.</p> <p translate>You can leave the controller empty if you do not need it.</p> </uib-tab> <uid-l10n-help-tab></uid-l10n-help-tab> </uib-tabset> </div> <div class=modal-footer> <button class="btn btn-link" ng-click=$dismiss() translate>Close</button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/custom-widget/save-as-popup.html",'<div class=modal-header> <h3 class=modal-title translate>Save {{ctrl.widget.name}} as...</h3> </div> <form class=form name=newWidget> <div class=modal-body id=modal-save-widget-as> <div class=form-group> <input name=name ng-model=ctrl.newName artifact-name-validation=bottom-left class=form-control id=widget-name placeholder="Widget Name" required> </div> </div> <div class=modal-footer id=modal-delete-widget-controls> <button class="btn btn-primary" ng-click=ctrl.ok() ng-disabled="!newWidget.name.$dirty || newWidget.$invalid || ctrl.newName == ctrl.widget.name" translate>Save</button> <button class="btn btn-link" ng-click="$dismiss(\'cancel\')" translate>Cancel</button> </div> </form> ')
}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/editor.html",'<header ui-view=header confirm-on-exit confirm-data=page></header> <div class=content-wrapper>  <div class=Palette ng-class="{\'Palette--closed\': isPaletteClosed, \'Palette--narrow\': isPaletteNarrow}" editor-palette on-resize="resizePaletteHandler(isClosed, isNarrow)"> </div> <div id=editor-container ng-class="{\'\': !sectionOpened}"> <div class=workspace> <container container=page editor=editor id=editor ng-click="editor.selectComponent(null, $event)" component-highlighter=component-element--hover data-is-editor-container=true bo-dropzone bo-drop-success="appendComponent($event, $data)"></container> <div class="alert alert-editor-hint" ng-if="page.rows.length === 1 && page.rows[0].length === 0"> <i class="fa fa-rotate-90 fa-share"></i> <h4 class=hint-title translate>This page is empty.</h4> <translate>To add content, drag and drop components from the palette to the whiteboard above.</translate> </div> </div> <div id=data-sidebar class=BottomPanel splitter-container> <div class=BottomPanel-toggleBar> <div class="BottomPanel-toggle clickable" splitter-toggle=#data-sidebar-splitter ng-class="{ \'BottomPanel-toggle--active\': splitterContainer.isActive( \'designer.\' + mode) && splitterContainer.isOpen() }" ng-click="splitterContainer.toggle( \'designer.\' + mode)"> <span translate>Variables</span> <i class=fa ng-if="splitterContainer.isActive( \'designer.\' + mode) || !splitterContainer.isOpen()" ng-class="{\'fa-angle-down\':splitterContainer.isOpen(), \'fa-angle-up\':!splitterContainer.isOpen()}"> </i> </div> <div class="BottomPanel-toggle clickable" splitter-toggle=#data-sidebar-splitter ng-class="{ \'BottomPanel-toggle--active\': splitterContainer.isActive(\'designer.page.asset\') && splitterContainer.isOpen() }" ng-click="splitterContainer.toggle(\'designer.page.asset\')" ng-if="mode===\'page\'"> <span translate>Assets</span> <i class=fa ng-if="splitterContainer.isActive(\'designer.page.asset\') || !splitterContainer.isOpen()" ng-class="{\'fa-angle-down\':splitterContainer.isOpen(), \'fa-angle-up\':!splitterContainer.isOpen()}"> </i> </div> </div> <div id=data-sidebar-splitter splitter-horizontal default-state=designer.page pane-top=#editor pane-bottom=#data-sidebar pane-bottom-max=600 pane-bottom-min=250> </div> <div class=BottomPanel-content ui-view=data></div> </div> <div splitter-toggle=#widget-properties-splitter title="{{\'Toggle properties panel\' | translate}}" target-state=designer.page id=toggle-properties class="clickable toggle"> <i class="fa toggle-right"></i> </div> </div> <div id=widget-properties class=PropertyPanel> <div id=widget-properties-splitter splitter-vertical=right pane-left=#editor-container pane-right=#widget-properties pane-right-max=500 pane-right-min=280></div> <div class=PropertyPanel-popover ng-include="\'js/editor/properties-panel/properties-panel.html\'"></div> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/help-popup.html",'<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left> <uib-tab heading="{{ \'Overview\' | translate }}"> <p translate> Use the UI Designer to create or edit web artifacts: <b>application pages</b> composing business applications, <b>process forms</b> linked to process instantiation or human tasks execution, as well as <b>application layouts</b>, applied to all pages of a business application. </p> <p translate>Artifact creation:</p> <ul> <li translate>Create an <b>application page</b> directly in the UI Designer</li> <li translate>Start creating a <b>process form</b> in Bonita BPM Studio: from the appropriate pool or human task, create a contract and launch the UI Designer. It will auto-generate a dedicated form to edit. </li> <li translate>Start creating an <b>application layout</b> by importing the default layout, available in the Bonita BPM Portal resources, and edit it. </li> </ul> <p translate> An artifact designed with the UI Designer can be exported to be shared with teammates (import in the UI Designer) or used in business applications (import in Bonita BPM Portal). </p> <p translate> There is a set of <b>default widgets</b> for displaying information to and for gathering information from the end users. You can also create <b>custom widgets</b>. </p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <translate>Create a fragment to reuse the same group of widgets with the same behavior in several pages or forms. </translate> </p> <p translate> The UI Designer generates <b>standard html application code, based on AngularJS</b>. Export pages if you want to further customize them in a different favorite web development environment. </p> </uib-tab> <uib-tab heading="{{ \'Integration with Bonita BPM platform\' | translate }}"> <p translate> <b>To use a page in a business application</b>, export it from the UI Designer, import it into Bonita BPM Portal resources, and from the relevant application, add it to the list of pages and to a navigation menu. </p> <p translate> <b>To use a form in a process</b>, map it in the studio to the relevant process or human task. It will be automatically packaged in the .bar archive ready to deploy in the portal.</p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <span translate>To update a form during production, export the form from the UI Designer, import it into the relevant process in the portal, and then map it to the relevant task or process start event.</span> </p> <p translate> <b>To use a layout in a business application</b>, export it from the UI Designer, import it into the portal as a resource and map it as the layout of the relevant application. </p> </uib-tab> </uib-tabset> </div> <div class=modal-footer> <button class="btn btn-link" ng-click=$dismiss() translate>Close</button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/home.html",'<header class=HomeHeader> <div class=HomeHeader-logo> <img src=img/logo.png> </div> <h1 class=HomeHeader-title translate>UI Designer</h1> <div class=HomeHeader-help> <button class="btn btn-bonita-help" ng-click=openHelp() title="{{\'Open help\' | translate}}"><i class="fa fa-question-circle"></i></button> </div> </header> <div class="container container--Home"> <div class="row Home-toolbar"> <div class=Home-buttons> <uid-create-artifact artifacts=artifacts.all></uid-create-artifact> <uid-import-artifact></uid-import-artifact> </div> <form class=Home-search role=search> <search value=search placeholder="{{ \'Search on name\' | translate }}"></search> </form> </div> <div class="row row--Home"> <section class="col-xs-5 Favorite-section"> <legend class="CreateArtifact-label CreateArtifact-label--primary" translate>Favorites</legend> <artifact-list artifacts="artifacts.all | filter:{name: search, favorite: \'true\'} | orderBy:\'-lastUpdate\'" refresh-all=refreshAll></artifact-list> </section> <section class="col-xs-7 Artifact-section"> <uib-tabset> <uib-tab ng-repeat="type in ::types" active=active> <uib-tab-heading class="tab-{{:: type.id}}"> {{:: type.name | translate }} <span class="badge ArtifactSection-badge" ng-class="{\'ArtifactSection-badge--hasResults\': search && artifacts[type.id].length}"> {{ artifacts[type.id].length }} </span> </uib-tab-heading> <artifact-list ng-if=active artifacts="artifacts[type.id] | orderBy:\'-lastUpdate\'" refresh-all=refreshAll></artifact-list> </uib-tab> </uib-tabset> </section> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/preview/preview.html",'<div class=Preview> <div class=Preview-header> <span class=Preview-title translate>Preview - {{pageName}}</span> <div class=navbar-right> <language-picker on-change=refreshIframe() class=navbar-text></language-picker> <resolutions-bar id=resolutions class="btn-group btn-group-lg navbar-text"></resolutions-bar> </div> </div> <iframe preview-localized-iframe class=Preview-viewport ng-src={{iframe.src}} width={{iframeWidth()}}></iframe> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/common/directives/alerts.html",'<div class=ui-alert-wrapper ng-show="alerts.length > 0"> <div class="ui-alert ui-alert-{{alert.type}}" ng-repeat="alert in alerts"> <button type=button class=close ng-click=remove($index) aria-label=Close><span aria-hidden=true>&times;</span></button> <h4>{{ alert.title || alert.type | translate }}</h4> <p alert-content=alert></p> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/common/directives/artifact-name-validation.html",'<input uib-tooltip="{{ name.errorMessage() }}" tooltip-class=tooltip-danger tooltip-is-open=name.errorMessage() tooltip-placement="{{ ::name.placement }}" tooltip-trigger=outsideClick ng-maxlength="{{ ::name.maxlength }}" ng-pattern="\'[a-zA-Z0-9]*\'"> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/data-panel/data-popup.html",'<form name=addData role=form novalidate ng-submit=save(newData)> <div class=modal-header> <h3 class=modal-title ng-if=isNewData translate>Create a new variable</h3> <h3 class=modal-title ng-if=!isNewData><span translate>Edit variable</span> <strong>{{newData.$$name}}</strong></h3> </div> <div class=modal-body> <div class=form-group ng-if=isNewData ng-class="{\'has-error\': !isDataNameUnique(newData.$$name)}"> <label class="control-label control-label--required" for=name> <span translate>Name</span> <span ng-show=!isDataNameUnique(newData.$$name) translate> \'{{newData.$$name}}\' already exists</span> </label> <input type=text class=form-control autofocus placeholder="{{\'Name\' | translate}}" name=name ng-model=newData.$$name ng-trim=false ng-pattern="/^[a-zA-Z][\\w]*$/" required> <p class=text-danger ng-show="addData.name.$dirty && addData.name.$error.pattern" translate>Variable names must start with a letter and contain only alphanumeric characters</p> </div> <exposable-data model=newData.exposed ng-if=exposableData></exposable-data> <div ng-if=!newData.exposed> <div class=form-group> <label class=control-label for=type translate>Type</label> <select name=type class=form-control ng-model=newData.type ng-change=updateValue(newData.type) ng-options="dataType.type as getLabel(dataType.type) group by dataType.group for dataType in dataTypes"></select> </div> <div ng-switch=newData.type class="form-group form-group--data">  <label ng-switch-default class=control-label for=value translate>Value</label> <input ng-switch-default type=text class=form-control placeholder="{{\'Value\' | translate }}" id=value name=value ng-model=newData.value>  <label ng-switch-when=urlparameter class=control-label for=value translate>URL parameter name</label> <input ng-switch-when=urlparameter type=text class=form-control placeholder="{{\'name\' | translate}}" id=value name=value ng-model=newData.value> <p class=help-block ng-switch-when=urlparameter translate> <span class=tip>Tip:</span> URL parameters are located after a <em>?</em> in the page URL. </p>  <label ng-switch-when=url class=control-label for=value translate>API URL</label> <input ng-switch-when=url autofocus type=text class=form-control placeholder=../API id=value name=value ng-model=newData.value required valid-url> <div class=help-block ng-switch-when=url translate> <p><span class=tip>Tip:</span> You can use data in the URL, by using the syntax <em ng-non-bindable>{{dataName}}</em></p> <p><span class=tip>Tip:</span> You can extend our REST API capabilities by creating <em>REST API extensions</em> in the Studio <i>Development</i> menu and use them here</p> </div> <section ng-switch-when=url> <button ng-click="examplesCollapsed = !examplesCollapsed" type=button class="btn btn-link" translate>See examples</button> <div class=well uib-collapse=examplesCollapsed> <div class=form-group> <select class=form-control ng-options="example as example.description group by example.category for example in apiExamples" ng-model=example></select> </div> <div> <p>{{ example.before }}</p> <p ng-bind-html=example.url></p> <p>{{ example.more }}</p> </div> <div ng-if=example.alternative> <p>{{ example.alternative.before }}</p> <p ng-bind-html=example.alternative.url></p> <p>{{ example.alternative.more }}</p> </div> </div> </section>  <label ng-switch-when=json class=control-label for=value translate>Value</label> <ace-editor class=ace-editor--data ng-switch-when=json autofocus mode=json ng-model=newData.value ng-model-options="{debounce: 300}" name=object required valid-json id=value></ace-editor> <p class=help-block ng-switch-when=json translate> <span class=tip>Tip:</span> Array syntax: ["val1", "val2"], Object syntax: {"key": "value"} </p> <section ng-switch-when=json> <button ng-click="examplesCollapsed = !examplesCollapsed" type=button class="btn btn-link" translate>See examples</button> <div uib-collapse=examplesCollapsed> <p translate> supportTicket is an object composed of a <em>subject</em>, <em>severity</em> level, user <em>environment</em>, reporter\u2019s <em>contact</em> (<em>name</em> and <em>job title</em>), and an <em>URL</em> providing more details on the contact. </p> <pre>{\n      "subject": "I have an issue",\n      "severity": 2,\n      "environment": ["Linux","PostgreSQL 9.3","Java 1.8","AngularJS 1.3"],\n      "contact":{\n          "name":"John Doe",\n          "jobTitle":"FrontEnd developer",\n           "contactDetailsURL":"http://jsonplaceholder.typicode.com/users/1"\n      }\n  }</pre> <p class="alert alert-info"> <span class="glyphicon glyphicon glyphicon-info-sign" aria-hidden=true></span> <span translate>JSON specifications can be found on the </span> <a href="http://www.w3.org/TR/json-ld/" title="{{\'view W3C\\\'s Json specification\'|translate}}" translate>W3C website</a> </p> </div> </section>  <label ng-switch-when=expression class=control-label for=value translate>Value</label> <ace-editor class=ace-editor--data ng-switch-when=expression autofocus mode=javascript auto-completion={{pageData}} ng-model=newData.value ng-model-options="{debounce: 300}" name=expression id=value></ace-editor> <p class=help-block ng-switch-when=expression translate> <span class=tip>Tip:</span> Hit <span class=key>$</span> key to access data, use ctrl-space to trigger autocomplete. </p> <section ng-switch-when=expression> <button ng-click="examplesCollapsed = !examplesCollapsed" type=button class="btn btn-link" translate>See examples</button> <div uib-collapse=examplesCollapsed> <p class="alert alert-default"> <span class="glyphicon glyphicon-info-sign" aria-hidden=true></span> <span translate>This example uses the JSON example provided if you select the type JSON.<br> It looks for the string \u2018Linux\u2019 in the array <code>environment</code> of JSON object <code>supportTicket</code></span> </p> <pre>return $data.supportTicket.environment.some(function(env){\n     return env.indexOf("Linux") != -1;\n  });</pre> </div> </section> </div> </div> </div> <div class=modal-footer> <button class="btn btn-bonita-default" ng-if=isNewData ng-disabled="!addData.$valid || !isDataNameUnique(newData.$$name)" translate>Save </button> <button class="btn btn-bonita-default" ng-if=!isNewData ng-disabled=!addData.$valid translate>Save</button> <button class="btn btn-link" type=button ng-click=cancel() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/data-panel/data.html",'<div class=DataHeader> <div class=DataHeader-action> <button class="btn btn-default" ng-click=openDataPopup() translate>Create a new variable</button> <button class="btn btn-default btn-data--help" ng-click=openHelp() title="{{\'Open help\' | translate}}"><i class="fa fa-question-circle"></i></button> </div> <div class=DataHeader-filter> <label class=sr-only translate> filter: </label> <search value=searchedData placeholder="{{ \'Search\' | translate }}"></search> </div> </div> <table class="table table-condensed table-ui-designer table-striped table-text-ellipsis"> <thead> <th translate>Name</th> <th ng-if=exposableData translate>Exposed</th> <th translate>Value</th> <th translate>Type</th> <th></th> </thead> <tbody> <tr ng-repeat="(key, data) in pageData as results track by key"> <td class=col-xs-2>{{key}}</td> <td class=col-xs-1 ng-if=exposableData> <i class=fa ng-class="{\'fa-check\': data.exposed}"></i> </td> <td class=col-xs-5> {{data.value}} </td> <td class=col-xs-1>{{getLabel(data.type)}}</td> <td class=col-xs-1> <div class="btn-group link-group btn-group-sm pull-right"> <button class="btn update-data" ng-click=openDataPopup(key) title="{{ \'Edit variable\' | translate }}"> <i class="fa fa-pencil"></i> </button> <button class="btn delete-data" ng-click=delete(key) title="{{ \'Delete variable\' | translate }}"> <i class="fa fa-trash"></i> </button> </div> </td> </tr> <tr ng-if="keys(results).length===0"> <td colspan="{{exposableData ? 5 : 4}}" translate>No variable</td> </tr> </tbody> </table> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/data-panel/help-popup.html","<div class=modal-header> <button type=button class=close ng-click=$dismiss()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left> <uib-tab heading=\"{{ 'General' | translate }}\"> <p translate> In the scope of a page, form, or layout, a variable can be used to handle business data, or can contain structural information that determines how page elements behave. </p> <p translate>Create a variable here. Using the variable in a widget property depends on the property value type, described in the page editor general help, in the <i>Properties</i> section.</p> <p translate>Available variables types are string and JSON (static), and External API, JavaScript expression, and URL parameter (dynamic).</p> <p translate>You can extend our REST API capacities by creating <em>REST API extensions</em> in the Studio <i>Development</i> menu and use them as External API variables in the UI Designer.</p> </uib-tab> <uib-tab heading=\"{{ 'Living data' | translate }}\"> <p translate>Variables can be bound to input fields to create conditional behavior between widget properties.</p> <p translate>A binding is dynamic, so every time data changes, all variables are re-evaluated and the UI is updated. In consequence:</p> <ul> <li translate>A variable initialized with a JavaScript expression is executed when the page is loaded. Then, when one of its dependencies changes, its value is updated. Dependencies are created using <code>$data.XXX</code>. </li> <li translate>A variable initialized with an External API is reloaded every time the URL value changes.</li> </ul> </uib-tab> <uib-tab heading=\"{{ 'Default variables' | translate }}\"> <p translate> When you generate a form from a contract in the Studio, the form contains a Submit button and some default variables: <code>formInput</code>, <code>formOutput</code>, <code>taskId</code>, and <code>context</code> </p> <p translate> <code>formInput</code> is a JSON object. <br>Its structure is defined by the contract inputs and the attributes are initialized with default values. It could be used to set initial values for form fields. <br>You can set the values in <code>formInput</code> either by editing the default values with constants (useful for test and debug) or with values from an object in an external source that has the same model (such as with a BDM external API). <br>You can also set the initial values of a form from some other source without using <code>formInput</code>. However, you will then have to edit <code>formOutput</code> manually. </p> <p translate> <code>formOutput</code> is a JavaScript expression returning an object. <br>Its structure matches the contract requirements and is filled with <code>formInput</code> by default. Its goal is to aggregate the fields from the form and to submit them to the task or process to fulfil the contract. On Submit, values entered or modified by the end-user and aggregated in the <code>formOutput</code> object (as defined by the <i>Data sent on click</i> property of the Submit button) are submitted to the process or task </p> <p translate> <code>taskId</code> is a URL Parameter. <br>It is the id of the current BPM task. You can use it as a BPM API parameter. </p> <p><code>context</code> is an External API. <br>It provides references to all business variables and documents in the process instance. To retrieve a business variable instance, create an External API variable with value <span ng-non-bindable>../{{context.myBusinessData_ref.link}}</span> </p> <p> To retrieve a document instance, create an External API variable with value <span ng-non-bindable>../API/{{context.documentData_ref.url}}</span> </p> <p> To allow your user to download a document add a link widget with its url property bound to<span ng-non-bindable>'../API/' + context.documentData_ref.url</span> </p> </uib-tab> </uib-tabset> </div> <div class=modal-footer> <button class=\"btn btn-link\" ng-click=$dismiss() translate>Close</button> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/header.html",'<div class=EditorHeader role=navigation> <div class=EditorHeader-menu> <a class=EditorHeader-back ng-click=vm.back() uib-tooltip="{{ \'Back\' | translate }}" tooltip-placement=right tooltip-popup-delay=300> <i class="fa fa-chevron-left"></i> </a> <a ui-sref=designer.home class=EditorHeader-homeNav uib-tooltip="{{ \'Home page\' | translate }}" tooltip-placement=right tooltip-popup-delay=300> <span class=EditorHeader-icon> <i class="ui-icon ui-designer"></i> </span> <strong class=EditorHeader-brand translate> <span>{{ vm.mode }}</span> editor </strong> </a> <form name=formName class="form-inline EditorHeader-form" autocomplete=off> <input type=text name=name artifact-name-validation=bottom class="form-control EditorHeader-name" id=pageName placeholder="{{ \'Enter \' + vm.mode + \' name\' | translate }}" ng-model=vm.page.name ng-trim=false required> <div class=btn-group uib-dropdown> <button id=save type=button class="btn btn-bonita-primary" ng-disabled=!formName.$valid ng-click=vm.save(vm.page) translate> Save </button> <button type=button class="btn btn-bonita-primary uib-dropdown-toggle" ng-disabled=!formName.$valid uib-dropdown-toggle> <span class="fa fa-caret-down"></span> <span class=sr-only translate>Save</span> </button> <ul class=dropdown-menu role=menu> <li><a id=saveAs class=clickable ng-click=vm.saveAs(vm.page) ng-disabled=!formName.$valid translate>Save as ...</a></li> </ul> </div> <button type=button id=export class="btn btn-bonita-primary" ng-disabled=!formName.$valid ng-click=vm.saveAndExport(vm.page) title="{{ \'Export\' | translate }}"> <i class="ui-icon ui-export"></i> </button> </form> <button class="btn btn-bonita-primary" id=preview title="{{ \'Preview\' | translate }}" ng-click=vm.save(vm.page) ng-disabled=!formName.$valid open-preview={{vm.mode}}> <i class="fa fa-play"></i> <span translate>Preview</span> </button> </div> <div class=EditorHeader-resolutions> <div resolutions-bar id=resolutions class=btn-group></div> </div> <div class=EditorHeader-help> <button class="btn btn-bonita-help" ng-click=vm.openHelp() title="{{\'Open help\' | translate}}"><i class="fa fa-question-circle"></i></button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/help-popup.html",'<div class=modal-header> <button type=button class=close ng-click=cancel()><span aria-hidden=true>&times;</span></button> <h3 class=modal-title translate>Help</h3> </div> <div class=modal-body> <uib-tabset class=tabs-left> <uib-tab heading="{{ \'Editor organization\' | translate }}"> <p translate>Use the palette on the left to drag and drop containers and widgets in the whiteboard.</p> <p translate>Once you select an element, edit its properties in the properties panel on the right.</p> <p translate>Create variables in the Variables panel at the bottom, and use them to edit the widget properties.</p> <p ng-if=pageEdition translate>Add images, CSS or JavaScript resources to your pages in the Assets panel at the bottom.</p> </uib-tab> <uib-tab heading="{{ \'Rows\' | translate }}"> <p> <translate>The whiteboard is organized in <b>rows</b> that you can move up and down, or delete. </translate> <ul> <li translate>Drag and drop widgets or containers in rows</li> <li translate>When you delete a row, the following rows move up</li> <li translate>Within a row, when you delete a widget or a container, the following elements move to the left </li> </ul> </p> </uib-tab> <uib-tab heading="{{ \'Widgets\' | translate }}"> <p translate>Use <b>widgets</b> from the palette on the left to <b>display information to</b> and <b>gather information from</b> the end users.</p> <p translate>Configure widgets using the <b>properties panel</b> on the right.</p> <p translate>You can also create <b>custom widgets</b> from the home page.</p> </uib-tab> <uib-tab heading="{{ \'Containers\' | translate }}"> <p translate> You can group widgets into a container to define the arrangement of widgets in a form or a page. A container can contain other containers. </p> <p> <translate>Each type or container has sepcific behaviors</translate> <ul> <li translate>Repeat content for the plain container</li> <li translate>Multiple content for tabs container</li> <li translate>Access to $form capabilities for form container</li> </ul> </p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <translate>You can save the content of a plain container as a reusable fragment.</translate> </p> </uib-tab> <uib-tab heading="{{ \'Variables\' | translate }}"> <p translate> In the scope of a page, form, or layout, a variable can be used to handle business data, or can contain structural information that determines how page elements behave. </p> <p translate> Create a variable in the bottom panel. Using a variable in a widget property depends on the property value type, described in the next section. </p> <p class=CalloutSubscription> <span class=CalloutSubscription--title translate>Subscription edition</span> <translate> In the fragment editor, you can set the scope of a variable to <i>specific to this fragment</i> or to <i>exposed to the page</i>. </translate> </p> </uib-tab> <uib-tab heading="{{ \'Properties\' | translate }}"> <ng-include src="\'js/editor/help/property-bond-help.html\'"> </ng-include></uib-tab> <uib-tab heading="{{ \'Localization\' | translate }}"> <h4 translate>Subscription edition</h4> <p translate>UI designer includes a mechanism to add translations for page elements, to support multi-language pages. The text displayed in the preview and at runtime adapts to the locale or browser language automatically.</p> <p translate>You can translate all the text displayed on a page or form: the labels, the placeholders, the available values of a list, but also the date format of the DatePicker widget. The base language is en_US. The phrases in English are used as the keys to the translated phrases. This means that in the Page editor whiteboard, any default text that is created is in English. The rest of the UI designer, including properties, is in the language of your Bonita BPM Studio. When you preview a page that has translated keys, the language of your browser is used.</p> <p translate>Each page has a localization asset that contains the keys and the translations for all phrases and all languages that the page supports. The asset is a file, localization.json. Each language is identified by the ISO 639 language attribute (for example, fr-FR, es-ES). Open the default localization.json asset to see how this file must be formatted. You can modify the default asset for your page, or import a new asset to replace the default one.</p> <p translate>In production, if the user is logged in to Bonita BPM, pages are displayed in the Portal language selected by the user, or in the default Portal language.</p> </uib-tab> <uid-responsive-help-tab></uid-responsive-help-tab> </uib-tabset> </div> <div class=modal-footer> <button class="btn btn-link" ng-click=cancel() translate>Close</button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/header/save-as-popup.html",'<div class=modal-header> <h3 class=modal-title translate>Save {{ctrl.page.name}} as...</h3> </div> <form class=form name=newPage> <div class=modal-body id=modal-save-page-as> <div class=form-group> <input name=name ng-model=ctrl.newName artifact-name-validation=bottom-left class=form-control id=page-name placeholder="{{ \'Page Name\' | translate }}" required> </div> </div> <div class=modal-footer id=modal-delete-page-controls> <button class="btn btn-primary" ng-click=ctrl.ok() ng-disabled="!newPage.name.$dirty || newPage.$invalid || ctrl.newName == ctrl.page.name" translate>Save</button> <button class="btn btn-link" ng-click="$dismiss(\'cancel\')" translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/help/bidirectional-bond-help.html","<translate>Use a bidirectional field to specify a read-write binding between the property value and a variable. </translate> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/help/constant-bond-help.html","<translate>A property that requires a constant value is presented in the Properties panel as a radio button set, drop-down list, or number selector (for the Width property). Select the required value. </translate> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/help/description-bond-help.html","<translate> A property value is constant, dynamic, a bidirectional bond, or an interpolation. </translate> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/help/dynamic-bond-help.html","<translate> Use a dynamic value field to specify a constant (the default) or an expression. Click the expression icon fx to switch from constant to expression. Click the constant icon X to switch from expression to constant. An expression can include a variable to make the property value dynamic, or can simply be the name of a variable. You can apply a filter to a variable value using a pipe. The binding to the variable is a read. If you want to write to the variable, use a bidirectional bond. Examples:</translate> <ul> <li translate>Define a condition for widget visibility, <em>userAge &gt; 18</em></li> <li translate>Define table headers as the value of a variable: <em>myArrayVariable</em></li> <li translate>Apply a filter to the value of a variable: <em>selectedUser | json</em></li> </ul> ")
}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/help/interpolation-bond-help.html","<translate>Use an interpolation field to enter text to display in the widget. The text can include variables that are interpreted using AngularJS interpolation. When the page is displayed, the variables are replaced by the interpolated values. Specify a variable as a simple expression enclosed in double braces, using the same format as for a dynamic value field. Example: I'm sorry, <em ng-non-bindable>{{ user.name | uppercase }}</em>. I'm afraid I can't do that. </translate> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/help/property-bond-help.html",'<p><ng-include src="\'js/editor/help/description-bond-help.html\'"></ng-include></p> <dl class=Guidance-definitionList> <dt translate>Constant</dt> <dd><ng-include src="\'js/editor/help/constant-bond-help.html\'"></ng-include></dd> <dt><translate>Dynamic value</translate> - <i class="ui-icon ui-expression"></i></dt> <dd><ng-include src="\'js/editor/help/dynamic-bond-help.html\'"> </ng-include></dd> <dt><translate>Bidirectional bond</translate> - <i class="fa fa-link"></i></dt> <dd><ng-include src="\'js/editor/help/bidirectional-bond-help.html\'"></ng-include></dd> <dt><translate>Interpolation</translate> - <i class="fa fa-paragraph"></i></dt> <dd><ng-include src="\'js/editor/help/interpolation-bond-help.html\'"></ng-include></dd> </dl> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/palette/editor-palette.html",'<section class=Palette-sections> <button class=Palette-section ng-class="{\'Palette-section--active\': palette.isActiveSection(section)}" ng-repeat="section in palette.sections track by $index | orderBy:\'order\'" ng-click=palette.toggleSection(section) aria-label="{{section.name | translate}}" uib-tooltip="{{section.name | translate}}" tooltip-placement=right tooltip-popup-delay=500 tooltip-append-to-body=true> <i class=ui-icon ng-class=palette.getIconClassName(section)></i> </button> </section> <div class=Palette-widgets ng-class="{\'Palette-widgets--narrow\': palette.isNarrow()}" ng-if="palette.currentSection !== undefined"> <div palette-widget class="PaletteItem text-center" ng-repeat="widget in palette.currentSection.widgets | orderBy:\'component.order\'" widget=widget> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/palette/palette-widget.html",'<div uib-tooltip="{{ widget.component.description | translate }}" tooltip-popup-delay=1000 tooltip-append-to-body=true tooltip-placement=right tooltip-is-open=tooltipIsOpen ng-mousedown="tooltipIsOpen = !tooltipIsOpen"> <div id="{{ widget.component.id }}" bo-draggable-data=widget bo-draggable> <img class=PaletteItem-icon ng-if=widget.component.icon ng-src={{iconData}}> <identicon ng-if=!widget.component.icon name={{widget.component.id}} size=30 background-color=[0,0,0,0]></identicon> <h5 class=PaletteItem-label>{{ widget.component.name }}</h5> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/component-properties-template.html",'<div class=form-group> <label for=width> <translate>Width</translate> <i class="fa fa-info-circle" tooltip-placement=top uib-tooltip="{{ \'Specify the number of columns of the element. All elements can take up to 12 columns.\' | translate }}" tooltip-append-to-body=true></i> </label> <div class="inner-addon left-addon"> <i class="fa fa-{{ resolution().icon }} bold text-normal"></i> <input ng-model=currentComponent.dimension[resolution().key] type=number class="form-control property--width input-sm" id=width min=1 max=12> <div class=editor-field-icon-label translate translate-n=currentComponent.dimension[resolution().key] translate-plural=columns>column</div> </div> </div> <property-field ng-repeat="property in currentComponent.$$widget.properties" property=property property-value=currentComponent.propertyValues[property.name] properties=currentComponent.propertyValues page-data=page.data></property-field> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/container-properties-template.html","<div ng-include=\"'js/editor/properties-panel/component-properties-template.html'\"></div> <div ng-include=\"'js/editor/properties-panel/container-repeat-content-tip.html'\"></div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/container-repeat-content-tip.html","<div class=ContainerProperties-RepeatContentTip> <span class=tip>Tip: </span><translate>To use the collection data in the widgets of this container, there are contextual variables that you can bind to the widget properties:</translate> <ul> <li><translate><strong>$index</strong>: the index of the current iteration of the collection (counting from zero)</translate></li> <li><translate><strong>$item</strong>: the element of the current iteration</translate></li> <li><translate><strong>$collection</strong>: the current collection</translate></li> </ul> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/properties-panel.html",'<div class=PropertyPanel-inner ng-show=currentComponent> <h3 class=PropertyPanel-title>{{ currentComponent.$$widget.name }}</h3> <div class=PropertyPanel-content> <div class=row> <div class=col-xs-12 ng-if=currentComponent.$$widget.custom> <button class="btn btn-bonita-property" id=edit-custom-widget ng-disabled=!canBeSaved(page) ng-click=saveAndEditCustomWidget(currentComponent.$$widget.id) translate>Edit the custom widget </button> </div> </div> <div ng-include=currentComponent.$$propertiesTemplateUrl></div> </div> </div> <div class=PropertyPanel-inner ng-show=!currentComponent> <div class=PropertyPanel-content> <h4 class=PropertyPanel-hint translate>Select an element on the whiteboard, then set its properties here</h4> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/property-field.html",'<div class=form-group ng-if=isDisplayed() data-property="{{ property.name }}"> <div class=property-label> <label><i ng-if=property.icon class=PropertyPanel-PropertyIcon ng-class=property.icon.className></i> {{ property.label | translate }} <i class="fa fa-info-circle" ng-if=property.help uib-tooltip="{{property.help | translate}}" tooltip-append-to-body=true></i></label> <small class=help-block ng-bind-html="property.caption | translate"></small> </div> <ng-include src=propertyField.getBondTemplate(property)></ng-include> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/tab-properties-template.html","<div class=form-group> <label for=tab-title-input translate>Title</label> <input ng-model=currentComponent.title name=tab-title-input class=form-control id=tab-title-input> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/component-mover.html",'<section class=component-caption> {{component.$$widget.name}} <button ng-if=moveLeftVisible() ng-click=moveLeft() class="fa fa-arrow-circle-left btn-caption move-left" title="Move the component to the left"></button> <button ng-if=moveRightVisible() ng-click=moveRight() class="fa fa-arrow-circle-right btn-caption move-right" title="Move the component to the right"></button> <button ng-click=onDelete() class="fa fa-times-circle btn-caption" title="Delete the component"></button> </section> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/component-template.html",'<component id="{{ component.$$id }}" class=component-element component=component editor=editor component-index=$index row=row container=container ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}" resizable=true> </component> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/component.html","<div class=widget-wrapper> <component-mover class=component-mover component=component on-delete=editor.removeCurrentComponent() ng-if=editor.isCurrentComponent(component)></component-mover> <div class=widget-content></div> <drop-zone editor=editor row=row container=container component-index=componentIndex></drop-zone> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/container-template.html",'<container id="{{ component.$$id }}" class=container-element container=component editor=editor ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}"> </container> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/container.html",'<div class=widget-wrapper> <i ng-if=isRepeated(container) class="fa fa-list-ul Component-marker" title="{{ \'Repeated container\' | translate }}"></i> <component-mover component=container on-delete=editor.removeCurrentComponent() ng-if=editor.isCurrentComponent(container)></component-mover> <div ng-repeat="row in container.rows" ng-init="rowIndex = $index"> <div ng-if="$first && !isEmpty(container)" class="row dropRow" bo-dropzone bo-drop-success="dropBeforeRow($data, $event, $index, container.rows)"></div> <div class="row row-builder" ng-class="{\'row-element\':moveRowUpVisible(row) || moveRowDownVisible(row) || container.rows.length > 1, \'row-separator\': !$last}"> <div class="component-caption component-caption--row" ng-if="moveRowUpVisible(row) || moveRowDownVisible(row) || container.rows.length > 1"> <translate>Row</translate> <button class="fa fa-arrow-circle-up btn-caption move-row-up" title="{{ \'Move the row up\' | translate }}" ng-click="moveRowUp(row, $event)" ng-if=moveRowUpVisible(row)></button> <button class="fa fa-arrow-circle-down btn-caption move-row-down" title="{{ \'Move the row down\' | translate }}" ng-click="moveRowDown(row, $event)" ng-if=moveRowDownVisible(row)></button> <button class="fa fa-times-circle btn-caption" title="Delete the row" ng-click=removeRow(row) ng-if="container.rows.length > 1"></button> </div> <div ng-repeat="component in row" class=component ng-class=editor.componentClasses(component) bo-draggable bo-draggable-data=component bo-drop-item="dropItem($data, row, rowIndex)"> <div ng-include=component.$$templateUrl></div> </div> <div ng-if="editor.rowSize(row) < 12" bo-dropzone bo-drop-success="dropAtEndOfTheRow($data, $event, row)" data-col="{{12 - editor.rowSize(row)}}" class="widget-placeholder drop-container col-xs-{{12 - editor.rowSize(row)}}"> </div> </div> <div ng-if=!isEmpty(container) class="row dropRow" ng-class="{ \'dropRow--last\': $last }" bo-dropzone bo-drop-success="dropAfterRow($data, $event, $index, container.rows)"></div> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/form-container-template.html",'<form-container id="{{ component.$$id }}" class=form-element form-container=component editor=editor ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}"> </form-container> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/form-container.html",'<div class=widget-wrapper> <component-mover component=formContainer on-delete=editor.removeCurrentComponent() ng-if=editor.isCurrentComponent(formContainer)></component-mover> <form name="form-{{ id }}"> <container container=formContainer.container editor=editor></container> </form> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/tabs-container-template.html",'<tabs-container id="{{ component.$$id }}" class=container-element tabs-container=component editor=editor ng-click="editor.selectComponent(component, $event)" ng-class="{\'component-element--selected\': editor.isCurrentComponent(component)}"> </tabs-container> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/whiteboard/tabs-container.html",'<div class=widget-wrapper> <component-mover component=tabsContainer on-delete=editor.removeCurrentComponent() ng-if=editor.isCurrentComponent(tabsContainer)></component-mover> <ul class="nav nav-tabs" role=tablist> <li class=tab-element ng-repeat="tab in tabsContainer.tabs" ng-class="{\'active\': isOpened(tab), \'current-tab\': editor.isCurrentComponent(tab)}"> <a class=clickable ng-click="openTab(tab, $event)"> <button ng-click=moveTabLeft(tab) ng-if=moveTabLeftVisible(tab) class="fa fa-arrow-circle-left move-tab-left btn-tab"></button> <button ng-click=moveTabRight(tab) ng-if=moveTabRightVisible(tab) class="fa fa-arrow-circle-right move-tab-right btn-tab"></button> <span class=tab-title>{{ tab.title }}</span> <button title="{{ \'Remove tab\' | translate }}" ng-click=removeTab(tab) ng-if=isRemoveTabVisible(tab) class="fa fa-times-circle btn-tab"></button> </a> </li> <li class=tab-element> <a class=clickable ng-click=addTab($event) title="{{ \'Add a new tab\' | translate }}"> <i class="fa fa-plus"></i> </a> </li> </ul> <div ng-repeat="tab in tabsContainer.tabs" ng-show=isOpened(tab)> <container container=tab.container component=tabsContainer editor=editor></container> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/alert-deletion-notpossible-popup.html",'<div id=cannot-delete-popup> <div class=modal-header> <h3 class=modal-title> <span translate>Deletion is not possible</span> </h3> </div> <div class=modal-body> <span translate>The {{ artifact.type }} cannot be deleted because it is used in:</span> <ul> <li ng-repeat="(key, value) in artifact.usedBy"> <translate translate-n=artifact.usedBy[key].length translate-plural="{{ key }}s">{{ key }}</translate>: <span style="margin-left: 2px" class=badge ng-repeat="usedBy in artifact.usedBy[key]">{{ usedBy.name }}</span> </li> </ul> </div> <div class=modal-footer> <button class="btn btn-primary" ng-click=cancel() translate>Close</button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/artifact-list.html",'<p class=Artifact-empty ng-if="artifactList.all.length === 0" translate> No artifact found. </p> <ul class=ArtifactList ng-if=artifactList.all.length> <li class="ArtifactList-item ArtifactList-item--primary ArtifactList-{{:: artifact.type }}" id="{{:: artifact.id }}" ng-repeat="artifact in artifactList.all track by artifact.id"> <div class=Artifact-info ng-switch=artifactList.isInEditionMode($index)> <a ng-switch-default ng-href="{{:: artifact.editionUrl }}" class="Artifact-link Artifact-link--primary"> <span ng-if=artifact.icon class=Artifact-icon><identicon name={{artifact.id}} size=25 foreground-color="[198, 199, 228, 255]" background-color=[0,0,0,0]></identicon></span> <i ng-if=!artifact.icon class="ui-icon ui-{{:: artifact.type }}s Artifact-icon" title="{{:: artifact.type }}"></i> <span title="{{:: artifact.name }}" class=Artifact-text> <span class=Artifact-name>{{:: artifact.name }}</span> <span class=Artifact-metadata>{{:: artifactList.translateKeys(\'Last Update:\') }} {{:: artifact.lastUpdate | date:\'short\' }}</span> </span> </a> <form name=renameArtifact class=Artifact-form ng-switch-when=true ng-submit=artifactList.renameItem(artifact) ng-init="artifact.newName = artifact.name"> <input name=name artifact-name-validation data-autofocus id="page-name-input-{{:: $index }}" ng-model=artifact.newName ng-blur="renameArtifact.$valid && artifactList.renameItem(artifact)" class=form-control required> </form> </div> <div class=Artifact-actions> <button class="Artifact-button Artifact-button--primary Artifact-rename" ng-click=artifactList.toggleItemEdition($index) type=button title="{{:: artifactList.translateKeys(\'Rename\') }}" ng-if=":: artifactList.getRepository(artifact.type).rename"> <i class="fa fa-pencil"></i> </button> <favorite-button artifact-repository=::artifactList.getRepository(artifact.type) artifact=":: artifact"></favorite-button> <button file-download class="Artifact-button Artifact-button--primary Artifact-export" href="{{:: artifactList.getRepository(artifact.type).exportUrl(artifact) }}" title="{{:: artifactList.translateKeys(\'Export\') }}"> <i class="ui-icon ui-export"></i> </button> <button class="Artifact-button Artifact-button--primary Artifact-delete" type=button ng-click=artifactList.deleteArtifact(artifact) title="{{:: artifactList.translateKeys(\'Delete\') }}"> <i class="fa fa-trash"></i> </button> </div> </li> </ul> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/confirm-deletion-popup.html",'<div id=confirm-delete-popup> <div class=modal-header> <h3 class=modal-title translate>Confirm deletion</h3> </div> <div class=modal-body translate> Are you sure you want to delete the {{ artifact.type }} <b>{{ artifact.name }}</b>? </div> <div class=modal-footer> <button class="btn btn-primary" ng-click=ok() translate>Delete</button> <button class="btn btn-link" ng-click=cancel() translate>Cancel</button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/artifact-list/favorite-button.html",'<span ng-switch=vm.isFavorite()> <button ng-switch-when=true class="Artifact-button Artifact-favoriteButton Artifact-favoriteButton--checked" ng-click=vm.toggleFavorite() type=button title="{{:: \'Unmark as favorite\' | translate }}"> <i class="fa FavoriteButton-icon"></i> </button> <button ng-switch-default class="Artifact-button Artifact-favoriteButton" ng-click=vm.toggleFavorite() type=button title="{{:: \'Mark as favorite\' | translate }}"> <i class="fa FavoriteButton-icon"></i> </button> </span> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/create/create-popover.html",'<form class=NewArtifact name=newArtifactForm ng-submit="createCtrl.create(createCtrl.type, createCtrl.name)"> <div class=modal-header> <h3 class=modal-title translate>Create new artifact</h3> </div> <div class=modal-body> <div class="form-group NewArtifact-type"> <label for=type tranlate>Type</label> <div class=radio ng-repeat="type in createCtrl.types"> <label><input type=radio name=type id=type-{{type.key}} ng-model=createCtrl.type ng-value=type>{{type.value | translate}} <i ng-if=type.tooltip class="fa fa-info-circle" uib-tooltip={{type.tooltip}} tooltip-placement=top></i> </label> </div> </div> <div class=form-group> <label for=name translate>Name</label> <input id=name name=name type=text class=form-control required autofocus placeholder="{{ createCtrl.type.value + \' name\' | translate }}" ng-model=createCtrl.name ui-validate="{alreadyExists : \'!createCtrl.isNameUniqueIfRelevantForType($value, createCtrl.type)\'}" ui-validate-watch="\'createCtrl.type\'" artifact-name-validation artifact-name-validation-messages="{ alreadyExists: \'A {{ createCtrl.type.value.toLowerCase() }} with this name already exists\' }"> </div> </div> <div class=modal-footer> <button type=submit class="btn btn-primary" ng-disabled=newArtifactForm.$invalid translate>Create</button> <button type=button class="btn btn-link" ng-click=createCtrl.close() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/create/home-create.html",'<button type=button class="btn btn-bonita-primary HomeCreate" title="{{\'Create a new UI Designer artifact\' | translate}}" uib-popover-template="\'js/home/create/create-popover.html\'" popover-trigger=outsideClick popover-placement=bottom-left popover-is-open=createCtrl.isOpen popover-class=HomeCreate-popover> <i class="fa fa-plus"></i> <translate>Create</translate> </button> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/home-import.html",'<button type=button class="btn btn-bonita-default HomeImport" title="{{\'Import a UI Designer artifact\' | translate}}" uib-popover-template="\'js/home/import/import-popover.html\'" popover-trigger=outsideClick popover-placement=bottom-left popover-is-open=import.isOpen popover-class=HomeImport-popover> <i class="ui-icon ui-import"></i> <translate>Import</translate> </button> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-error-message.html","<p> {{ cause }} </p> <p> <div>{{ consequence }}</div> <div>{{ additionalInfos }}</div> </p> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-popover.html",'<form action="{{ import.url }}" name=uploadForm ng-upload=import.onComplete(content)> <div class=modal-header> <h3 class=modal-title>{{ import.popupTitle | translate }}</h3> </div> <div class=modal-body> <div class="input-group file-upload"> <input type=text readonly disabled placeholder="{{\'Select your .zip file\' | translate}}" value={{import.filename}} class=form-control> <span class=input-group-btn> <span class=btn ng-class="{\'btn-default disabled\':$isUploading, \'btn-primary\':!$isUploading}"> <input class=file-upload-input ng-class="{\'file-upload-input--disabled\':$isUploading}" name=file type=file accept=application/zip ng-model=import.filename required file-input-change> <i class=fa ng-class="{\'fa fa-spinner fa-pulse\':$isUploading, \'fa-folder\':!$isUploading}"> </i></span> </span> </div> </div> <div class=modal-footer> <button type=submit class="btn btn-primary" ng-disabled="uploadForm.$invalid || $isUploading" translate>Import</button> <button type=button class="btn btn-link" ng-click=import.close() translate>Cancel</button> </div> </form> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-report-item-list.html",'<ul> <li ng-if=displayPage class=ImportReport-page> <span class=text-muted> <i class="ui-icon ui-pages"></i> <translate class=ImportReport-type>{{ type }}</translate> </span> {{ pageName }} </li> <li ng-repeat="(artifactType, artifacts) in dependencies"> <span class=text-muted> <i class="ui-icon ui-{{artifactType}}s"></i> <translate translate-n=artifacts.length translate-plural="{{ artifactType }}s" class=ImportReport-type>{{ artifactType }} </translate> </span> {{ joinOnNames(artifacts) }} </li> </ul> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-report-popup.html",'<div class=ImportReport> <div class=modal-header> <h3 class=modal-title><i class="fa fa-exclamation-triangle text-warning"></i><translate>Import {{ ::importReport.name }}</translate></h3> </div> <div class=modal-body ng-if=importReport.hasDependencies()> <translate>The imported zip file contains elements with the same name as some existing elements. These existing elements will be overwritten:</translate> <import-report-item-list page-name=importReport.name type=importReport.type display-page=importReport.report.overridden dependencies=importReport.report.dependencies.overridden></import-report-item-list> <div ng-if="!importReport.report.overridden || importReport.report.dependencies.added"> <p> <translate>The zip file also contains new elements.</translate> <span ng-click="showDetails = !showDetails" class="clickable ImportReport--smallAndUnderlined"><span ng-if=showDetails class="fa fa-caret-down"></span><span ng-if=!showDetails class="fa fa-caret-right"></span><translate>Details</translate></span> </p> <div uib-collapse=!showDetails> <import-report-item-list page-name=importReport.name type=importReport.type display-page=!importReport.report.overridden dependencies=importReport.report.dependencies.added></import-report-item-list> </div> </div> <p translate>Do you want to import this zip file?</p> </div> <div class=modal-body ng-if=!importReport.hasDependencies()> <p translate>A {{ ::importReport.type }} named <strong>{{ ::importReport.name }}</strong> already exists.<br>Click <em>Import</em> to overwrite.</p> </div> <div class=modal-footer> <button type=button class="btn btn-primary" ng-click=importReport.forceImport() translate>Import</button> <button type=button class="btn btn-link" ng-click="$dismiss(\'cancel\')" translate>Cancel</button> </div> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/home/import/import-success-message.html",'<div class=ImportReport ng-controller="ImportSuccessMessageController as import"> <p><span class=ImportReport-type>{{ type | translate }}</span> <strong>{{ element.name }}</strong> <translate>successfully imported.</translate> </p> <section class=ImportReport-added ng-if=dependencies.added> <translate>Added artifacts</translate>: <import-report-item-list page-name=element.name type=type display-page=!overridden dependencies=dependencies.added></import-report-item-list> </section> <section class=ImportReport-overridden ng-if=dependencies.overridden> <translate>Overridden artifacts</translate>: <import-report-item-list page-name=element.name type=type display-page=overridden dependencies=dependencies.overridden></import-report-item-list> </section> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/common/directives/search/search.html",'<div class=Search> <i class="Search-icon fa fa-search" aria-hidden=true></i> <input class="form-control Search-input" name=search ng-model=search.value ng-model-options="{ debounce: 200 }" placeholder="{{ search.placeholder }}" type=search> <button type=button ng-if=search.isClearButtonVisible() ng-click=search.clearValue() class=Search-clearButton title="{{ \'Clear search\' | translate }}" aria-label="{{ \'Clear search\' | translate }}"> <i aria-hidden=true class="fa fa-times"></i> </button> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/bond/constant.html","<ng-include src=propertyField.getFieldTemplate(property) include-replace></ng-include> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/bond/expression.html",'<div class="input-group input-group-sm" ng-class="{ \'linked\': propertyField.isExpression() }"> <ng-include src=propertyField.getFieldTemplate(property) include-replace ng-if=!propertyField.isExpression()></ng-include> <input id="property-{{ property.label.toLowerCase() }}" ng-model=propertyValue.value type=text class="form-control PropertyPanel-expression" ng-if=propertyField.isExpression() uib-typeahead="key for key in getDataNames() | filter:$viewValue.trim()" placeholder="{{ \'expression or variable\' | translate }}"> <span class=input-group-btn> <button class="btn btn-bonita-property" type=button ng-click=propertyField.toggleExpressionEditor()> <i ng-if=!propertyField.isExpression() class="ui-icon ui-expression" title="{{ \'Click to bind to an expression\' | translate }}"></i> <i ng-if=propertyField.isExpression() class="fa fa-times" title="{{ \'Click to bind to a constant\' | translate }}"></i> </button> </span> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/bond/interpolation.html","<div class=\"input-group input-group-sm\"> <ng-include src=propertyField.getFieldTemplate(property) include-replace></ng-include> <div class=input-group-addon title=\"{{ 'Text, optionally including variables in simple expressions for interpolation using [[ variableName ]]' | translate | mustachify:'[[':']]' }}\"><i class=\"fa fa-paragraph\"></i></div> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/bond/variable.html",'<div class="input-group input-group-sm linked"> <input name=paramValue ng-model=propertyValue.value type=text uib-typeahead="key for key in getDataNames() | filter:$viewValue.trim()" autofocus=linked class=form-control> <span class=input-group-btn title="{{ \'Variable in read-write binding with the property value\' | translate }}"> <button class="btn btn-bonita-property" type=button disabled><i class="fa fa-link"></i></button> </span> </div> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")
}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/boolean.html","<div> <label class=radio-inline> <input ng-model=propertyValue.value type=radio ng-value=false> <span translate>no</span> </label> <label class=radio-inline> <input ng-model=propertyValue.value type=radio ng-value=true> <span translate>yes</span> </label> </div> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/choice-grouped.html",'<select ng-model=propertyValue.value ng-options="choiceValue.value as choiceValue.label | translate group by choiceValue.group | translate for choiceValue in property.choiceValues" class=form-control></select> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/choice.html",'<select ng-model=propertyValue.value ng-options="choiceValue as choiceValue | translate for choiceValue in property.choiceValues" class=form-control></select> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/collection.html","<input ng-model=propertyValue.value ng-list class=form-control> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/float.html","<input ng-model=propertyValue.value type=number class=form-control> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/html.html",'<textarea id="property-{{ property.label.toLowerCase() }}" ng-model=propertyValue.value class="form-control PropertyPanel-PropertyInput">\n</textarea> ')}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/integer.html","<input min={{property.constraints.min}} max={{property.constraints.max}} ng-model=propertyValue.value type=number class=form-control> ")}])}(),function(e){try{e=angular.module("bonitasoft.designer.templates")}catch(t){e=angular.module("bonitasoft.designer.templates",[])}e.run(["$templateCache",function(e){e.put("js/editor/properties-panel/field/text.html",'<input id="property-{{ property.label.toLowerCase() }}" ng-model=propertyValue.value type=text class=form-control> ')}])}(),function(){"use strict";angular.module("bonitasoft.designer",["app.route","bonitasoft.designer.preview","bonitasoft.designer.home","bonitasoft.designer.custom-widget","bonitasoft.designer.common.repositories","bonitasoft.designer.common.services","bonitasoft.designer.common.directives","bonitasoft.designer.common.filters","bonitasoft.designer.editor","bonitasoft.designer.templates","bonitasoft.designer.assets","ngSanitize","ui.router","ui.bootstrap","ui.ace","org.bonitasoft.dragAndDrop","gettext","ngUpload","angularMoment"])}(),function(){"use strict";angular.module("bonitasoft.designer.assets",["bonitasoft.designer.common.directives","gettext","ui.bootstrap"])}(),function(){"use strict";angular.module("bonitasoft.designer.common.directives",["ngSanitize","bonitasoft.designer.common.services","bonitasoft.designer.templates","ui.ace","ui.router","gettext","ui.bootstrap"])}(),function(){"use strict";angular.module("bonitasoft.designer.common.filters",[])}(),function(){"use strict";angular.module("bonitasoft.designer.common.repositories",[])}(),function(){"use strict";angular.module("bonitasoft.designer.common.services",["gettext","dn.sha"])}(),function(){"use strict";angular.module("bonitasoft.designer.custom-widget",["bonitasoft.designer.common.repositories","bonitasoft.designer.common.services","ui.bootstrap","gettext","ui.router"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor",["bonitasoft.designer.editor.common","bonitasoft.designer.editor.data-panel","bonitasoft.designer.editor.palette","bonitasoft.designer.editor.properties-panel","bonitasoft.designer.editor.header","bonitasoft.designer.editor.whiteboard","bonitasoft.designer.assets","gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.common",["gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.data-panel",["bonitasoft.designer.common.repositories","bonitasoft.designer.common.directives","gettext","ui.bootstrap"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.header",["bonitasoft.designer.common.services","bonitasoft.designer.common.repositories","gettext","ui.bootstrap","ui.router"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.palette",["bonitasoft.designer.templates","bonitasoft.designer.editor.common","gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.properties-panel",["bonitasoft.designer.templates","bonitasoft.designer.editor.common","bonitasoft.designer.common.filters","gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.editor.whiteboard",["bonitasoft.designer.templates","bonitasoft.designer.editor.common","bonitasoft.designer.common.services","gettext","RecursionHelper","ui.router"])}(),function(){"use strict";angular.module("bonitasoft.designer.home",["bonitasoft.designer.common.repositories","bonitasoft.designer.common.directives","bonitasoft.designer.home.import","bonitasoft.designer.templates","ui.bootstrap","ui.router","ui.validate"])}(),function(){"use strict";angular.module("bonitasoft.designer.home.import",["bonitasoft.designer.common.repositories","bonitasoft.designer.common.services","bonitasoft.designer.templates","gettext"])}(),function(){"use strict";angular.module("bonitasoft.designer.preview",["bonitasoft.designer.common.services","ui.router"])}(),function(){"use strict";function e(e,t,n,a,o,r,i){e.debugInfoEnabled(!1),t.cloneOnDrop(!1),t.activeBodyClassName(!0),n.setTriggers({"show-tooltip":"hide-tooltip"}),o.otherwise("/en/home"),Object.keys(r).forEach(function(e){a.state(e,r[e])}),angular.extend(i.options,{backdrop:"static",windowClass:"modal fade in"})}e.$inject=["$compileProvider","boDraggableItemProvider","$uibTooltipProvider","$stateProvider","$urlRouterProvider","appStates","$uibModalProvider"],ace.config.set("basePath","js"),ace.config.set("modePath","js"),ace.config.set("themePath","js"),ace.config.set("workerPath","js");var t=window.navigator.userAgent.indexOf("MSIE 9")>-1;angular.module("uidesigner",["bonitasoft.designer"]).value("isIE9",t).config(e).run(["$rootScope","$uibModalStack",function(e,t){e.$on("$locationChangeStart",function(){return t.dismissAll()})}])}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,l,c){function u(e,n){a.isExternal(e)&&(o.createAsset(l.id,a.formToAsset(e)).then(t.close),n.preventDefault())}function d(e){return e&&e.type&&e.message}function p(e){d(e)&&("MalformedJsonException"===e.type?n.addError({contentUrl:"js/assets/malformed-json-error-message.html",context:e},12e3):n.addError(e.message),b.cancel()),t.close(e)}function m(e){b.assetSavingAction=h+e}function f(e){function t(e,t){return e.type===t.type&&t.name===e.name}function n(e,t){return!angular.isDefined(t.scope)||t.scope===e}return e&&(i||[]).filter(n.bind(null,s)).some(t.bind(null,e))}function g(e){var t={name:e.name,type:a.getType(e.type).value};return"img"===e.type?c.getString("An {{type}} asset named <em>{{ name }}</em> is already added to assets.",t):c.getString("A {{type}} asset named <em>{{ name }}</em> is already added to assets.",t)}var h="rest/"+s+"s/"+l.id+"/assets/",b=this;b.asset=r,b.isNewAsset=void 0===r,b.assetTypes=a.getAssetTypesByMode(s),b.assetSources=a.getSources(),b.templates=a.getFormTemplates(),b.newAsset=a.assetToForm(r),b.cancel=t.dismiss,b.isExternalAsset=a.isExternal,b.onComplete=p,b.saveExternalAsset=u,b.updateSavingAction=m,b.assetSavingAction=h+"js",b.isExisting=f,b.getWarningMessage=g,b.urlPattern=/^[\w#!:.?+=&%@\-\/]+$/,e.$watch(function(){return b.newAsset.external},function(e,t){return e!==t&&delete b.newAsset.name})}e.$inject=["$scope","$uibModalInstance","alerts","assetsService","artifactRepo","asset","assets","mode","artifact","gettextCatalog"],angular.module("bonitasoft.designer.assets").controller("AssetPopupCtrl",e)}(),function(){angular.module("bonitasoft.designer.assets").controller("AssetPreviewPopupCtrl",["$scope","$uibModalInstance","asset","component","mode","assetsService",function(e,t,n,a,o,r){"use strict";function i(){return r.getAssetUrl(n,o,a)+"?format=text"}e.url=i(),e.asset=n,e.cancel=function(){t.dismiss()}}])}(),function(){angular.module("bonitasoft.designer.assets").filter("assetType",["assetsService",function(e){"use strict";var t=e.getTypes();return function(e){return t.reduce(function(t,n){return n.key===e?n.value:t},"")}}])}(),function(){"use strict";function e(e,t,n,a,o){function r(e){return n.incrementOrderAsset(h.component.id,e).then(s)}function i(e){return n.decrementOrderAsset(h.component.id,e).then(s)}function s(){n.loadAssets(h.component).then(function(e){h.component.assets=e})}function l(e){return n.desactivateAsset(h.component.id,e).then(c)}function c(){var e=h.component.assets.filter(function(e){return!e.active}).map(function(e){return e.id});h.component.inactiveAssets=e.length?e:void 0}function u(e){n.deleteAsset(h.component.id,e).then(function(){h.component.assets=h.component.assets.filter(function(t){return t.id!==e.id})})}function d(t){e.open({templateUrl:"js/assets/asset-preview-popup.html",controller:"AssetPreviewPopupCtrl",resolve:{asset:function(){return t},component:function(){return h.component},mode:function(){return a}}})}function p(e){return o.getAssetUrl(e,a,h.component)}function m(o){var r=e.open({templateUrl:"js/assets/asset-popup.html",controller:"AssetPopupCtrl",controllerAs:"vm",resolve:{asset:function(){return o},assets:function(){return h.component.assets},mode:function(){return a},artifact:function(){return t},artifactRepo:function(){return n}}});r.result.then(f)}function f(e){var t=!1;h.component.assets=h.component.assets.map(function(n){return n.id===e.id?(t=!0,e):n}),t||h.component.assets.push(e)}function g(t){e.open({templateUrl:"js/assets/help-popup.html",size:"lg",controller:["$scope",function(e){"ngInject";e.isPage="widget"!==t}]})}var h=this;h.component=t,h.component.assets=h.component.assets||[],h.filters=o.getFilters(),h.isExternal=o.isExternal,h.isPageAsset=o.isPageAsset,h.deactivateAsset=l,h.incrementOrderAsset=r,h.decrementOrderAsset=i,h.delete=u,h.openAssetPreviewPopup=d,h.getAssetUrl=p,h.openAssetPopup=m,h.openHelp=g}e.$inject=["$uibModal","artifact","artifactRepo","mode","assetsService"],angular.module("bonitasoft.designer.assets").controller("AssetCtrl",e)}(),function(){angular.module("bonitasoft.designer.assets").filter("assetFilter",function(){"use strict";return function(e,t){return e&&t?e.filter(function(e){return t[e.type].value}):e}})}(),function(){function e(){function e(e){function n(e){return e?{id:e.id,name:e.name,type:e.type,external:o(e),order:e.order,oldname:e.name,oldtype:e.type}:{type:t[0].key,external:!0}}function a(e){var t={id:e.id,type:e.type,order:e.order};return e.external&&(t.name=e.name,t.external=!0),t}function o(e){return e.external}function r(e){return!e.componentId}function i(){return t.map(function(e){return{key:e.key,value:{label:e.value,value:e.filter}}}).reduce(function(e,t){return e[t.key]=t.value,e},{})}function s(e){return"widget"===e?t.filter(function(e){return e.widget}):t}function l(){return t.map(function(e){return{key:e.key,value:e.template}}).reduce(function(e,t){return e[t.key]=t.value,e},{})}function c(e,t){t.assets=(e&&e.$$widget.assets||[]).filter(function(e){return u(e,t.assets)}).map(function(t){return t.componentId=t.componentId||e.id,t.scope=t.scope||"widget",t}).concat(t.assets)}function u(e,t){return!t.some(function(t){return t.id===e.id})}function d(e,t){t.assets=t.assets.filter(function(t){return t.componentId!==e.id})}function p(e,t,n){return"widget"===t?"rest/widgets/"+n.id+"/assets/"+e.type+"/"+e.name:"widget"===e.scope?"rest/widgets/"+e.componentId+"/assets/"+e.type+"/"+e.name:"rest/pages/"+n.id+"/assets/"+e.type+"/"+e.name}function m(e){return t.filter(function(t){return t.key===e})[0]}var f={external:{key:!0,value:e.getString("External")},local:{key:!1,value:e.getString("Local")}};return{isExternal:o,isPageAsset:r,getSources:function(){return f},getTypes:function(){return t},getFilters:i,assetToForm:n,formToAsset:a,getAssetTypesByMode:s,getAssetUrl:p,getFormTemplates:l,addWidgetAssetsToPage:c,removeAssetsFromPage:d,getType:m}}e.$inject=["gettextCatalog"];var t=[{key:"js",value:"JavaScript",filter:!0,widget:!0,template:"js/assets/generic-asset-form.html"},{key:"css",value:"CSS",filter:!0,widget:!0,template:"js/assets/generic-asset-form.html"},{key:"img",value:"Image",filter:!0,widget:!0,template:"js/assets/generic-asset-form.html"}];return{registerType:function(e){return t.push(e)},$get:e}}angular.module("bonitasoft.designer.assets").provider("assetsService",e)}(),angular.module("bonitasoft.designer.common.directives").directive("aceEditor",["aceDataCompleter",function(e){"use strict";var t=ace.require("ace/ext/language_tools");return{restrict:"E",replace:!0,scope:{mode:"@",autoCompletion:"@"},template:"<div ui-ace=\"{ mode: '{{mode}}', showGutter: true, onLoad: loaded }\"></div>",controller:["$scope","$parse","$attrs",function(n,a,o){var r=this;n.loaded=function(a){if(a){if(a.$blockScrolling=1/0,o.autoCompletion){var i=e(n.$eval(n.autoCompletion));t.setCompleters([i,t.keyWordCompleter]),a.setOptions({enableBasicAutocompletion:!0,enableLiveAutocompletion:!0})}r.editor=a,a.setShowPrintMargin(!1),a.commands.addCommand({name:"deleteAll",bindKey:{win:"Ctrl-Alt-Shift-D",mac:"Ctrl-Alt-Shift-D"},exec:function(e){e.setValue("")},readOnly:!1})}},n.$on("$destroy",function(){r.editor.completer&&r.editor.completer.detach(),r.editor.destroy()})}]}}]),function(){function e(e,t){return function(n,a,o){n.$watch(function(e){return e.$eval(o.alertContent)},function(o){o.contentUrl&&(o.content=t.get(o.contentUrl)),a.html(o.content),e(a.contents())(angular.extend(n,o.context))})}}e.$inject=["$compile","$templateCache"],angular.module("bonitasoft.designer.common.directives").directive("alertContent",e)}(),angular.module("bonitasoft.designer.common.directives").directive("alerts",function(){"use strict";return{restrict:"E",controller:["$scope","alerts",function(e,t){e.alerts=t.alerts,e.remove=function(e){t.remove(e)}}],templateUrl:"js/common/directives/alerts.html"}});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";function e(){return{scope:{},require:["^form","artifactNameValidation"],controller:n,controllerAs:"name",templateUrl:"js/common/directives/artifact-name-validation.html",replace:!0,link:function(e,t,n,a){var o=a[1];o.form=a[0],o.placement=n.artifactNameValidation||"top-left"}}}function t(){return{require:"artifactNameValidation",link:function(e,t,n,a){n.$observe("artifactNameValidationMessages",function(t){return angular.extend(a.validators,e.$eval(t))})}}}var n=function(){function e(t){_classCallCheck(this,e),this.maxlength=240,this.validators={pattern:t.getString("Name must contains only alphanumeric characters with no space"),maxlength:t.getString("Name must be less than {{maxlength}} characters long",this)}}return e.$inject=["gettextCatalog"],_createClass(e,[{key:"errorMessage",value:function(){var e=this;return this.form&&Object.keys(this.form.$error).reduce(function(t,n){return t||e.validators[n]||t},"")}}]),e}();angular.module("bonitasoft.designer.common.directives").directive("artifactNameValidation",e).directive("artifactNameValidationMessages",t)}(),angular.module("bonitasoft.designer.common.directives").directive("autofocus",["$timeout",function(e){"use strict";return{restrict:"A",require:"?aceEditor",link:function(t,n,a,o){var r=n.get(0);a.autofocus&&t.$watch(a.autofocus,function(t,n){!n&&t&&e(function(){r.focus(),"text"===r.type&&r.value.length>0&&r.select()})}),a.autofocus||e(function(){o?o.editor.focus():(r.focus(),"text"===r.type&&r.value.length>0&&r.select())})}}}]),angular.module("bonitasoft.designer.common.directives").directive("confirmOnExit",["$rootScope","$stateParams","$state","$injector","$window","gettextCatalog",function(e,t,n,a,o,r){"use strict";var i=r.getString("You have unsaved changes. Do you really want to leave ?");return{scope:{confirmData:"="},link:function(t){function r(e,n){-1===n.name.indexOf(l)&&s.needSave(t.confirmData)&&!window.confirm(i)&&e.preventDefault()}if(n.current.resolve&&n.current.resolve.artifactRepo){var s=a.get(n.current.resolve.artifactRepo[0]),l=n.current.name;s.initLastSavedState(t.confirmData);var c=e.$on("$stateChangeStart",r);o.onbeforeunload=function(){return s.needSave(t.confirmData)?i:void 0},t.$on("$destroy",function(){o.onbeforeunload=void 0,c()})}}}}]),angular.module("bonitasoft.designer.home").directive("fileDownload",["$document","$http",function(e,t){"use strict";e.find("body").append('<iframe class="ExportArtifact" src=""></iframe>');var n=e[0].querySelector(".ExportArtifact");return{restrict:"A",link:function(e,a,o){a.on("click",function(){t.get(o.href).success(function(){n.setAttribute("src",o.href)})}),e.$on("$destroy",function(){return a.off("click")})}}}]),function(){"use strict";function e(){return{require:"ngModel",link:function(e,t,n,a){function o(t){var n="";n=t.target.files&&t.target.files.length>0?t.target.files[0].name:t.target.value.match(/([^\\|\/]*)$/)[0],e.$apply(function(){a.$setViewValue(n),a.$render()})}t.on("change",o),e.$on("$destroy",function(){t.off("change",o)})}}}angular.module("bonitasoft.designer.common.directives").directive("fileInputChange",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e),this.restrict="E",this.template='<img width={{ctrl.size}} height={{ctrl.size}} ng-src="data:image/png;base64,{{ctrl.data}}"/>',this.bindToController={name:"@",size:"@",backgroundColor:"=",foregroundColor:"="},this.scope=!0,this.controllerAs="ctrl"}return _createClass(e,[{key:"controller",value:["$scope","$sha","$window",function(e,t,n){"ngInject";var a=this;e.$watchGroup([function(){return a.name},function(){return a.size}],function(){a.data=new n.Identicon({hash:"bfa9e803ac1996bf71fe537e853fe67d4cfc19f3",size:Number(a.size)||40,bg:angular.isArray(a.backgroundColor)&&a.backgroundColor.length>1?a.backgroundColor:[64,72,83],fg:angular.isArray(a.foregroundColor)&&a.foregroundColor.length>1?a.foregroundColor:[255,255,255]}).toString()})}]}]),e}();angular.module("bonitasoft.designer.common.directives").directive("identicon",function(){return new e})}(),angular.module("bonitasoft.designer.common.directives").directive("includeReplace",function(){return{require:"ngInclude",link:function(e,t){t.replaceWith(t.children())}}});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"clearValue",value:function(){this.value=""}},{key:"isClearButtonVisible",value:function(){return(this.value||"").trim().length>0}}]),e}();angular.module("bonitasoft.designer.common.directives").directive("search",function(){return{scope:{value:"=",placeholder:"@"},bindToController:!0,controllerAs:"search",controller:e,templateUrl:"js/common/directives/search/search.html"}})}(),angular.module("bonitasoft.designer.common.directives").controller("SplitterContainerCtrl",["$scope","$state",function(e,t){var n,a=!0;this.isActive=function(e){return t.current.name===e},this.isOpen=function(){return a},this.register=function(e){n=e},this.toggle=function(e){a?t.current.name===e&&(n.closeBottom(),a=!1):(n.openBottom(),a=!0),t.go(e,void 0,{location:!1})},e.$on("$destroy",function(){n=void 0})}]).directive("splitterContainer",function(){return{controller:"SplitterContainerCtrl",controllerAs:"splitterContainer"}}),angular.module("bonitasoft.designer.common.directives").directive("splitterHorizontal",["$document",function(e){return{scope:{paneTop:"@",paneBottom:"@",paneBottomMax:"@",paneBottomMin:"@"},require:"?^splitterContainer",template:'<div class="BottomPanel-splitter"></div>',controller:["$scope",function(e){function t(t,n){var a=t-n;return a>e.paneBottomMax&&(a=e.paneBottomMax),a<e.paneBottomMin&&(a=e.paneBottomMin),a}this.topElem=$(e.paneTop),this.bottomElem=$(e.paneBottom),this.resize=function(e){var n=t(this.bottomElem[0].getBoundingClientRect().bottom,e);this.topElem.css({bottom:n+"px"}),this.bottomElem.css({height:n+"px"})},this.closeBottom=function(){this.topElem.css({bottom:0}),this.bottomElem.addClass("splitter-pane-closed")},this.openBottom=function(){this.bottomElem.removeClass("splitter-pane-closed"),this.topElem.css({bottom:this.bottomElem[0].getBoundingClientRect().height+"px"})}}],link:function(t,n,a,o){function r(){s.removeClass("splitter-onmove"),l.removeClass("splitter-onmove"),e.unbind("mousemove",i),e.unbind("mouseup",r)}function i(e){s.addClass("splitter-onmove"),l.addClass("splitter-onmove"),c.resize(e.pageY)}var s=$(a.paneTop),l=$(a.paneBottom),c=n.controller("splitterHorizontal");o&&o.register(c),s.addClass("splitter-pane splitter-pane-top"),l.addClass("splitter-pane splitter-pane-bottom"),n.find(".BottomPanel-splitter").on("mousedown",function(t){t.preventDefault(),e.on("mousemove",i),e.on("mouseup",r)})}}}]),angular.module("bonitasoft.designer.common.directives").directive("splitterToggle",function(){function e(e){if(e.hasAttribute("splitter-horizontal"))return"splitter:toggle:bottom";if(e.hasAttribute("splitter-vertical"))return"left"===e.getAttribute("splitter-vertical")?"splitter:toggle:left":"splitter:toggle:right";throw"splitterToggle can only be applied to splitterHorizontal and splitterVertical"}return{link:function(t,n,a){var o=e(document.querySelector(a.splitterToggle));n.on("click",function(){angular.element(a.splitterToggle).trigger(o,a.targetState),t.$digest()})}}}),angular.module("bonitasoft.designer.common.directives").directive("splitterVertical",["$document",function(e){return{scope:{paneLeft:"@",paneRight:"@",paneRightMax:"@",paneRightMin:"@"},transclude:!0,template:'<div class="splitter splitter-vertical"></div><ng-transclude></ng-transclude>',controller:["$scope","$window",function(e,t){function n(n){var a=n;return t.innerWidth-a>e.paneRightMax&&(a=t.innerWidth-e.paneRightMax),t.innerWidth-a<e.paneRightMin&&(a=t.innerWidth-e.paneRightMin),a}this.displayed=!0,this.xPosition=void 0,this.leftElem=$(e.paneLeft),this.rightElem=$(e.paneRight),this.closeRight=function(){var e=this.rightElem[0].getBoundingClientRect();this.xPosition=e.right-e.left,this.rightElem.addClass("splitter-pane-closed"),this.leftElem.css({right:0}).addClass("splitter-closed-right")},this.openRight=function(){this.leftElem.css({right:this.xPosition+"px"}).removeClass("splitter-closed-right"),this.rightElem.removeClass("splitter-pane-closed")},this.closeLeft=function(){var e=this.leftElem[0].getBoundingClientRect();this.xPosition=e.right,this.rightElem.css({left:0}).addClass("splitter-closed-left"),this.leftElem.addClass("splitter-pane-closed")},this.openLeft=function(){this.rightElem.css({left:this.xPosition+"px"}).removeClass("splitter-closed-left"),this.leftElem.removeClass("splitter-pane-closed")},this.toggleRight=function(){this.displayed?this.closeRight():this.openRight(),this.displayed=!this.displayed},this.toggleLeft=function(){this.displayed?this.closeLeft():this.openLeft(),this.displayed=!this.displayed},this.resize=function(e){this.xPosition=n(e),this.rightElem.css({left:this.xPosition+"px"}),this.leftElem.css({right:t.innerWidth-this.xPosition+"px"})}}],link:function(t,n,a,o){function r(e){s.addClass("splitter-onmove"),l.addClass("splitter-onmove"),o.resize(e.pageX)}function i(){s.removeClass("splitter-onmove"),l.removeClass("splitter-onmove"),e.unbind("mousemove",r),e.unbind("mouseup",i)}var s=$(a.paneLeft),l=$(a.paneRight);s.addClass("splitter-pane splitter-pane-left"),l.addClass("splitter-pane splitter-pane-right"),n.find(".splitter").on("mousedown",function(t){t.preventDefault(),e.on("mousemove",r),e.on("mouseup",i)}),n.on("splitter:toggle:right",function(e){e.preventDefault(),o.toggleRight()}),n.on("splitter:toggle:left",function(e){e.preventDefault(),o.toggleLeft()})}}}]),angular.module("bonitasoft.designer.common.directives").directive("tooltipToggle",["$timeout",function(e){"use strict";return{name:"tooltipToggle",link:function(t,n,a){a.tooltipTrigger="show-tooltip",t.$watch(a.tooltipToggle,function(t){e(t?function(){n.triggerHandler("show-tooltip")}:function(){n.triggerHandler("hide-tooltip")})})}}}]),function(){"use strict";function e(e){var n=arguments.length<=1||void 0===arguments[1]?"[[":arguments[1],a=arguments.length<=2||void 0===arguments[2]?"]]":arguments[2];return e.replace(t(n),"{{").replace(t(a),"}}")}function t(e){function t(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}return new RegExp(t(e),"g")}angular.module("bonitasoft.designer.common.filters").filter("mustachify",function(){return e})}(),function(){"use strict";function e(e){function t(t){return e.post("import/"+t+"/force").then(function(e){return e.data})}function n(t){return e.post("import/"+t+"/cancel").then(function(e){return e.data})}return{forceImport:t,cancelImport:n}}e.$inject=["$http"],angular.module("bonitasoft.designer.common.repositories").service("importRepo",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";function e(e){var t=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,"page","rest/pages"))}return _inherits(t,e),_createClass(t,[{key:"rename",value:function(e,t){return this.$http.put(this.baseUrl+"/"+e+"/name",t)}},{key:"createAsset",value:function(e,t){return this.$http.post(this.baseUrl+"/"+e+"/assets",t).then(function(e){return e.data})}},{key:"desactivateAsset",value:function(e,t){return this.$http.put(this.baseUrl+"/"+e+"/assets/"+t.id+"?active="+t.active,t)}},{key:"loadAssets",value:function(e){return this.$http.get(this.baseUrl+"/"+e.id+"/assets").then(function(e){return e.data})}},{key:"deleteAsset",value:function(e,t){return this.$http.delete(this.baseUrl+"/"+e+"/assets/"+t.id)}}]),t}(e);return new t}e.$inject=["Repository"],angular.module("bonitasoft.designer.common.repositories").factory("pageRepo",e).factory("formRepo",e).factory("layoutRepo",e)}(),function(){"use strict";function e(e){return{get:function(t){return e.get(t+"Repo")}}}e.$inject=["$injector"],angular.module("bonitasoft.designer.common.repositories").factory("repositories",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";function e(e){var t=function(){function t(n,a){_classCallCheck(this,t),this.type=n,this.baseUrl=a,this.lastSavedState={},this.$http=e}return _createClass(t,[{key:"save",value:function(e){var t=this;return this.$http.put(this.baseUrl+"/"+e.id,e).success(function(){t.lastSavedState=e})}},{key:"initLastSavedState",value:function(e){this.lastSavedState=angular.copy(e)}},{key:"needSave",value:function(e){return!angular.equals(e,this.lastSavedState)}},{key:"delete",value:function(e){return this.$http.delete(this.baseUrl+"/"+e)}},{key:"create",value:function(e,t){return this.$http.post(this.baseUrl+(t?"?duplicata="+t:""),e).then(function(e){return e.data})}},{key:"load",value:function(e){return this.$http.get(this.baseUrl+"/"+e)}},{key:"all",value:function(){return this.$http.get(this.baseUrl).then(function(e){return e.data})}},{key:"exportUrl",value:function(e){return"export/"+this.type+"/"+e.id}},{key:"markAsFavorite",value:function(e){return this.$http.put(this.baseUrl+"/"+e+"/favorite",!0)}},{key:"unmarkAsFavorite",value:function(e){return this.$http.put(this.baseUrl+"/"+e+"/favorite",!1)}}]),t}();return t}e.$inject=["$http"],angular.module("bonitasoft.designer.common.repositories").factory("Repository",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";function e(e){var t=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this,"widget","rest/widgets"))}return _inherits(t,e),_createClass(t,[{key:"customs",value:function(){return this.$http.get(this.baseUrl+"?view=light").then(function(e){return e.data.filter(function(e){return e.custom})}).then(function(e){return e.map(function(e){return e.icon=!0,e.type="widget",e})})}},{key:"loadAssets",value:function(e){return this.load(e.id).then(function(e){return e.data.assets})}},{key:"createAsset",value:function(e,t){return this.$http.post(this.baseUrl+"/"+e+"/assets",t).then(function(e){return e.data})}},{key:"deleteAsset",value:function(e,t){return this.$http.delete(this.baseUrl+"/"+e+"/assets/"+t.id)}},{key:"incrementOrderAsset",value:function(e,t){return this.$http.put(this.baseUrl+"/"+e+"/assets/"+t.id+"?increment=true",t)}},{key:"decrementOrderAsset",value:function(e,t){return this.$http.put(this.baseUrl+"/"+e+"/assets/"+t.id+"?decrement=true",t)}},{key:"addProperty",value:function(e,t){return this.$http.post(this.baseUrl+"/"+e+"/properties",t)}},{key:"updateProperty",value:function(e,t,n){return this.$http.put(this.baseUrl+"/"+e+"/properties/"+t,n)}},{key:"deleteProperty",value:function(e,t){return this.$http.delete(this.baseUrl+"/"+e+"/properties/"+t)}}]),t}(e);return new t}e.$inject=["Repository"],angular.module("bonitasoft.designer.common.repositories").factory("widgetRepo",e)}(),angular.module("bonitasoft.designer.common.services").service("aceDataCompleter",function(){return function(e){return{getCompletions:function(t,n,a,o,r){function i(e){return"$data."+e}function s(e,t){return 0===t.indexOf(e)}var l=Object.keys(e).map(i).filter(s.bind(null,o)).map(function(e){return{name:e,value:e,score:2,meta:"data"}});r(null,l)}}}}),function(){"use strict";function e(e,t){function n(t,n){i.push(t),e(function(){a(0)},n||s,1)}function a(e){i.splice(e,1)}function o(e,t){return"string"==typeof e?{type:t,content:e}:(e.type=t,e)}function r(e,t,a){var r=o(t,e);n(r,a)}var i=[],s=8e3;return{alerts:i,remove:a,addError:r.bind(null,t("error")),addSuccess:r.bind(null,t("success")),addWarning:r.bind(null,t("warning"))}}e.$inject=["$interval","gettext"],angular.module("bonitasoft.designer.common.services").factory("alerts",e)
}(),angular.module("bonitasoft.designer.common.services").factory("arrays",function(){"use strict";function e(e,t,n){var a=t.indexOf(e),o=0!==a?a-1:0;n&&(o=-1!==a?a+1:1),(a||1!==t.length)&&(t.length>1&&t.splice(a,1),t.splice(o,0,e))}function t(t,n){e(t,n,!1)}function n(t,n){e(t,n,!0)}function a(e,t,n){var a=n.indexOf(e);n.splice(a,1),n.splice(t,0,e)}function o(e,t){return t.indexOf(e)>0}function r(e,t){return t.indexOf(e)<t.length-1}function i(e,t,n){var a=t.length;if(a>0)for(var o=a-1;o>=0;o--)n?n(t[o],e)&&t.splice(o,1):t[o]===e&&t.splice(o,1);return t}function s(e,t){var n=t.indexOf(e);return n>-1&&t.splice(n,1),t}function l(e,t,n){t>=0?n.splice(t,0,e):n.push(e)}return{moveLeft:t,moveRight:n,moveAtPosition:a,moveLeftPossible:o,moveRightPossible:r,remove:i,removeFirst:s,insertAtPosition:l}}),angular.module("bonitasoft.designer.common.services").factory("clock",function(){"use strict";return{now:Date.now}}),angular.module("bonitasoft.designer.common.services").factory("errorInterceptor",["$q","alerts",function(e,t){"use strict";return{responseError:function(n){return t.addError(n.headers("Content-Type")&&0===n.headers("Content-Type").indexOf("application/json")&&angular.isDefined(n.data.message)?n.data.message:"Unexpected server error"),e.reject(n)}}}]).config(["$httpProvider",function(e){e.interceptors.push("errorInterceptor")}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){var e=function(){function e(t){_classCallCheck(this,e),this.$window=t}return _createClass(e,[{key:"back",value:function(e){e&&1===this.$window.history.length?e():this.$window.history.back()}}]),e}();angular.module("bonitasoft.designer.common.services").factory("browserHistoryService",["$window",function(t){return new e(t)}])}(),function(){"use strict";angular.module("bonitasoft.designer.common.services").service("keymaster",["$window",function(e){return e.key}])}(),function(){"use strict";function e(){function e(e){d=e}function t(e){c=l(e),u=c}function n(e){p=e||p}function a(){return angular.copy(p)}function o(){return c}function r(){return d}function i(){return u}function s(e){return u=l(e)}function l(e){return d.filter(function(t){return t.key===e}).pop()||c}var c={key:"xs",icon:"laptop",width:"100%"},u=c,d=[c],p={xs:12};return{registerResolutions:e,setDefaultResolution:t,setDefaultDimension:n,all:r,get:l,selected:i,select:s,getDefaultResolution:o,getDefaultDimension:a}}angular.module("bonitasoft.designer.common.services").service("resolutions",e)}(),function(){"use strict";angular.module("bonitasoft.designer.common.services").service("utils",function(){this.clamp=function(e,t,n){return e>t?e:t>n?n:t}})}(),function(){"use strict";function e(e,t,n,a,o,r,i,s,l,c,u,d){e.widget=t,e.bonds=u;var p=s.getString("Custom widget [ {{name}} ] successfully saved",{name:e.widget.name}),m=n;i("ctrl+s",function(){return e.$apply(function(){e.save()}),!1}),e.isTypeSelectable=function(e){return"variable"!==e&&"interpolation"!==e},e.back=function(){return d.back(function(){return c.go("designer.home")})},e.updateParam=function(t,n){m.updateProperty(e.widget.id,t,n).then(function(t){e.widget.properties=t.data})},e.addParam=function(t){m.addProperty(e.widget.id,t).then(function(t){e.widget.properties=t.data})},e.deleteParam=function(t){m.deleteProperty(e.widget.id,t.name).then(function(t){e.widget.properties=t.data})},e.save=function(){m.save(e.widget).then(function(){a.addSuccess(p,2e3)})},e.saveAndExport=function(){m.save(e.widget).then(function(){r.location=m.exportUrl(e.widget)})},e.saveAs=function(e){function t(e){l.id=e.id,c.go(c.current,l,{reload:!0})}function n(t){return m.create(t,e.id)}var a=o.open({templateUrl:"js/custom-widget/save-as-popup.html",controller:"saveWidgetAsPopUpCtrl",controllerAs:"ctrl",resolve:{widget:function(){return e}}});a.result.then(n).then(t)},e.createOrUpdate=function(t){var n=o.open({templateUrl:"js/custom-widget/create-property.html",controller:"PropertyEditorPopupCtrl",resolve:{param:function(){return t}}});n.result.then(function(t){t.paramToUpdate?e.updateParam(t.paramToUpdate.name,t.param):e.addParam(t.param)})},e.openHelp=function(){o.open({templateUrl:"js/custom-widget/help-popup.html",size:"lg"})}}e.$inject=["$scope","artifact","artifactRepo","alerts","$uibModal","$window","keymaster","gettextCatalog","$stateParams","$state","BONDS","browserHistoryService"],angular.module("bonitasoft.designer.custom-widget").controller("CustomWidgetEditorCtrl",e)}(),angular.module("bonitasoft.designer.custom-widget").value("BONDS",{variable:{type:"text",name:"Bidirectional bond",template:"js/editor/help/bidirectional-bond-help.html"},expression:{name:"Dynamic value",template:"js/editor/help/dynamic-bond-help.html"},interpolation:{type:"text",name:"Interpolation",template:"js/editor/help/interpolation-bond-help.html"},constant:{name:"Constant",template:"js/editor/help/constant-bond-help.html"}}).controller("PropertyEditorPopupCtrl",["$scope","param","$uibModalInstance","BONDS",function(e,t,n,a){"use strict";e.paramToUpdate=t,e.types=["text","choice","html","integer","boolean","collection"],e.bonds=a,e.isTypeChoicable=function(){return"choice"===e.currentParam.type&&("constant"===e.currentParam.bond||"expression"===e.currentParam.bond)},e.isTypeSelectable=function(){return"constant"===e.currentParam.bond||"expression"===e.currentParam.bond},e.currentParam=e.paramToUpdate?angular.copy(t):{type:"text",bond:e.paramToUpdate&&e.paramToUpdate.bond||"expression"},e.updateBond=function(t){t&&e.bonds[t]&&e.bonds[t].type&&(e.currentParam.type=e.bonds[t].type),e.currentParam.bond=t},e.ok=function(){"variable"===e.selectedBond&&(e.currentParam.defaultValue=null),n.close({param:e.currentParam,paramToUpdate:e.paramToUpdate})},e.cancel=function(){n.dismiss("cancel")}}]);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=void 0,t=function(){function t(n,a){_classCallCheck(this,t),this.widget=a,this.newName=a.name,e=n}return t.$inject=["$uibModalInstance","widget"],_createClass(t,[{key:"ok",value:function(){var t=angular.copy(this.widget);t.name=this.newName,e.close(t)}}]),t}();angular.module("bonitasoft.designer.custom-widget").controller("saveWidgetAsPopUpCtrl",t)}(),function(){"use strict";function e(){function e(e){o=e.reduce(function(e,t){return e[t.component.id]=t,e},o)}function t(e,t){var n=e.id||e.type;if(!o.hasOwnProperty(n))throw new Error("Component "+n+" has not been registered");var a=o[n].init;a(e,t)}function n(){o={}}function a(){return o}var o={};return{reset:n,register:e,init:t,get:a}}angular.module("bonitasoft.designer.editor.common").factory("components",e)}(),function(){"use strict";function e(e){function t(e){return(e||[]).reduce(function(e,t){return e[t.name]=n(t),e},{})}function n(e){return{type:"expression"===e.bond?"constant":e.bond,value:e.defaultValue}}function a(e){return e.properties=r.concat(e.properties||[]),e}function o(e){return"expression"===e.type||"variable"===e.type}var r=[{label:e("CSS classes"),caption:e("Space-separated list"),name:"cssClasses",type:"string",defaultValue:"",bond:"expression",help:e("Any accessible CSS classes. By default UI Designer comes with Bootstrap http://getbootstrap.com/css/#helper-classes")},{label:e("Hidden"),name:e("hidden"),type:"boolean",defaultValue:!1,bond:"expression"}];return{computeValues:t,computeValue:n,addCommonPropertiesTo:a,isBound:o}}e.$inject=["gettext"],angular.module("bonitasoft.designer.editor.common").factory("properties",e)}(),function(){"use strict";function e(e){function t(){return{container:!0,custom:!1,id:"container",type:"container",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 20"><path fill="#fff" d="M50,6.7V3.8h-1v2.9H50z M50,11.4V8.6h-1v2.9H50z M50,16.2v-2.9h-1v2.9H50z M49,20h1v-1.9h-1v1V20zM44.1,20h2.9v-1h-2.9V20z M39.2,20h2.9v-1h-2.9V20z M34.3,20h2.9v-1h-2.9V20z M29.4,20h2.9v-1h-2.9V20z M24.5,20h2.9v-1h-2.9V20zM19.6,20h2.9v-1h-2.9V20z M14.7,20h2.9v-1h-2.9V20z M9.8,20h2.9v-1H9.8V20z M4.9,20h2.9v-1H4.9V20z M0,18.1V20h2.9v-1H1v-1H0zM0,13.3v2.9h1v-2.9H0z M0,8.6v2.9h1V8.6H0z M0,3.8v2.9h1V3.8H0z M2.9,0H0v1.9h1V1h2V0z M7.8,0H4.9v1h2.9V0z M12.7,0H9.8v1h2.9V0zM17.6,0h-2.9v1h2.9V0z M22.5,0h-2.9v1h2.9V0z M27.5,0h-2.9v1h2.9V0z M32.4,0h-2.9v1h2.9V0z M37.3,0h-2.9v1h2.9V0z M42.2,0h-2.9v1h2.9V0z M47.1,0h-2.9v1h2.9V0z M50,0h-1v1v1h1V0z"/></svg>',name:"Container",description:e("Group of widgets used to define the arrangement of the page elements. Its content can be repeated over an array"),order:-2,properties:[{name:"repeatedCollection",label:e("Collection"),help:e("Number of array elements defines the number of times the container structure is repeated. Array data is available to widgets in the container"),caption:e("Repeat container content. Variable of type array"),icon:{className:"fa fa-list-ul"},type:"string",bond:"variable"}]}}function n(){return{container:!0,custom:!1,id:"tabsContainer",type:"tabsContainer",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 20"><path fill="#fff" d="M50,11.4V8.6h-1v2.9H50z M50,16.2v-2.9h-1v2.9H50z M49,20h1v-1.9h-1v1V20z M44.1,20h2.9v-1h-2.9V20zM39.2,20h2.9v-1h-2.9V20z M34.3,20h2.9v-1h-2.9V20z M29.4,20h2.9v-1h-2.9V20z M24.5,20h2.9v-1h-2.9V20z M19.6,20h2.9v-1h-2.9V20zM14.7,20h2.9v-1h-2.9V20z M9.8,20h2.9v-1H9.8V20z M4.9,20h2.9v-1H4.9V20z M0,18.1V20h2.9v-1H1v-1H0z M0,13.3v2.9h1v-2.9H0zM0,8.6v2.9h1V8.6H0z M0,1v5.7h1V1H0z M15.7,0H1v1h14.7V0z M16.7,1h-1v4.8h2v-1h-1V1z M22.5,4.8h-2.9v1h2.9V4.8z M27.5,4.8h-2.9v1h2.9V4.8z M32.4,4.8h-2.9v1h2.9V4.8z M37.3,4.8h-2.9v1h2.9V4.8z M42.2,4.8h-2.9v1h2.9V4.8z M47.1,4.8h-2.9v1h2.9V4.8z M50,4.8h-1v1v1h1V4.8z"/><path fill="#CBD5E1" d="M34.3,1h-1v3.8h1V1z M18.6,1h14.7V0H18.6V1z M18.6,4.8V1h-1v3.8H18.6z"/></svg>',order:-1,name:"Tabs container",description:e("Multiple groups of widgets, each group in a tab")}}function a(){return{container:!0,custom:!1,id:"formContainer",type:"formContainer",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 20"><path fill="#fff" d="M5 19h3v1H5v-1zm5-18h3V0h-3v1zM5 1h3V0H5v1zm5 19h3v-1h-3v1zm5 0h3v-1h-3v1zm5 0h3v-1h-3v1zM15 1h3V0h-3v1zM1 9H0v2h1V9zM0 2h1V1h2V0H0v2zm23-2h-3v1h3V0zM1 4H0v3h1V4zm0 14H0v2h3v-1H1v-1zm0-5H0v3h1v-3zM27 0h-2v1h2V0zm22 19v1h1v-1.9h-1v.9zm-24 1h2v-1h-2v1zM44 1h3V0h-3v1zm5 15h1v-3h-1v3zm0-16v2h1V0h-1zm0 7h1V4h-1v3zm0 4h1V9h-1v2zm-5 9h3v-1h-3v1zM39 1h3V0h-3v1zM29 1h3V0h-3v1zm0 19h3v-1h-3v1zm5 0h3v-1h-3v1zm0-19h3V0h-3v1zm5 19h3v-1h-3v1zm-9-6H18v4h12v-4z"/><path fill="#CBD5E1" d="M45 2v4H18V2h27zM18 12h27V8H18v4zm4 5h4v-2h-4v2zM7 5h9V3H7v2zm-2 6h7V9H5v2zm8 0h3V9h-3v2z"/></svg>',name:"Form container",order:0,description:e("Container used for a form. Eases validation")}}return{createTabsContainerWidget:n,createContainerWidget:t,createFormContainerWidget:a}}e.$inject=["gettext"],angular.module("bonitasoft.designer.editor").factory("containerDefinitionFactory",e)}(),angular.module("bonitasoft.designer.editor.data-panel").factory("apiExamples",["gettextCatalog",function(e){function t(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))}var n={"System API":[{description:e.getString("Get current logged user"),url:"../API/system/session/1",more:e.getString("User id could then be obtained by using {{youVar.user_id}}")}],"BPM API":[{description:e.getString("Get a human task by its identifier"),url:"../API/bpm/humanTask/<strong>{{taskId}}</strong>",more:e.getString("Case identifier could then be retrieved by {{myVar.rootCaseId}}")},{description:e.getString("List of human task in ready state for current user (pending + assigned)"),url:"../API/bpm/humanTask?c=10&p=0&f=state=ready&f=user_id=<strong>{{userId}}</strong>&f=caseId=<strong>{{caseId}}</strong>"},{description:e.getString("List of cases open for a process definition id"),url:"../API/bpm/case?p=0&c=10&f=processDefinitionId=<strong>{{myProcessDefinitionId}}</strong>"},{description:e.getString("All process data of a case: Search for a list of case variables"),url:"../API/bpm/caseVariable?p=0&c=10&f=case_id=<strong>{{caseId}}</strong>"},{description:e.getString("Search a list of cases based on search indexes"),url:"../API/bpm/case?p=0&c=10&s=<strong>{{searchIndexValueSearched}}</strong>"},{description:e.getString("Get a case by its identifier"),url:"../API/bpm/case/<strong>{{caseId}}</strong>"}],"Identity API":[{description:e.getString("Get professional details of a user"),url:"../API/identity/user/<strong>{{userId}}</strong>?d=professional_data"}],"Customuserinfo API":[{description:e.getString("Get custom information of a user"),url:"../API/customuserinfo/user?p=0&c=10&f=userId=<strong>{{userId}}</strong>"}],"BDM API":[{description:e.getString("Get all business variables defined in a case"),url:"../API/bdm/businessDataReference?f=caseId=<strong>{{caseId}}</strong>&p=0&c=10",more:e.getString("In a process form, if you have defined business variables in your process, use the context variable to retrieve them (e.g. context.businessVariableName_ref).")},{description:e.getString("Get a named business variable reference defined in a case"),url:"../API/bdm/businessDataReference/<strong>{{caseId}}</strong>/<strong>{{businessVariableName}}</strong>",alternative:{before:e.getString("In a process form, if you have defined business variables in your process, use the link to the variable to retrieve using the context variable:"),url:"../<strong>{{context.businessVariableName_ref.link}}</strong>",more:e.getString("Where businessVariableName is the name of the business variable defined at pool level.")}},{description:e.getString("Call a business data (custom) query"),url:"../API/bdm/businessData/<strong>{{businessDataType}}</strong>?q=<strong>{{queryName}}</strong>&p=0&c=10&f=<strong>{{filter}}</strong>",more:e.getString('Where businessDataType = com.company.model.MyData, queryName = name of the BDM query, filter = "myParam=myValue"')}]},a=function(){return t(Object.keys(n).map(function(e){return n[e].map(function(t){return t.category=e,t})}))};return{get:a}}]),angular.module("bonitasoft.designer.editor.data-panel").controller("DataPopupController",["$scope","dataTypeService","$uibModalInstance","mode","pageData","data","apiExamples",function(e,t,n,a,o,r,i){"use strict";e.apiExamples=i.get(),e.example=e.apiExamples[0],e.examplesCollapsed=!0,e.dataTypes=t.getDataTypes(),e.getLabel=t.getDataLabel,e.pageData=o,e.isNewData=void 0===r,e.newData=r||t.createData(),e.exposableData="page"!==a,e.isDataNameUnique=function(e){return!e||!o[e]},e.updateValue=function(n){e.newData.value=t.getDataDefaultValue(n)},e.save=function(e){n.close(e)},e.cancel=function(){n.dismiss()}}]),angular.module("bonitasoft.designer.editor.data-panel").service("dataTypeService",["gettext",function(e){function t(e,t){return e===t.type}function n(e,t){return t.label}function a(e,t){return t.defaultValue}var o=[{label:e("String"),type:"constant",group:" ",defaultValue:""},{label:e("JSON"),type:"json",group:" ",defaultValue:"{}"},{label:e("External API"),type:"url",group:"--",defaultValue:""},{label:e("Javascript expression"),type:"expression",group:"--",defaultValue:'return "hello";'},{label:e("URL parameter"),type:"urlparameter",group:"--",defaultValue:""}];this.getDataTypes=function(){return o},this.getDataLabel=function(e){return o.filter(t.bind(null,e)).reduce(n,void 0)},this.getDataDefaultValue=function(e){return o.filter(t.bind(null,e)).reduce(a,void 0)},this.createData=function(){return{type:"constant",exposed:!1}}}]),angular.module("bonitasoft.designer.editor.data-panel").controller("DataCtrl",["$scope","dataTypeService","$location","$uibModal","artifact","mode",function(e,t,n,a,o,r){"use strict";e.searchedData="",e.page=o,e.pageData=o.data,e.getLabel=t.getDataLabel,e.exposableData="page"!==r,e.keys=Object.keys,e.delete=function(t){delete e.page.data[t],e.filterPageData()},e.save=function(t){e.page.data[t.$$name]={exposed:t.exposed,type:t.type,value:t.value},e.filterPageData()},e.filterPageData=function(){function t(e,t,n){return-1!==t.indexOf(e.trim())||-1!==angular.toJson(n||{}).indexOf(e.trim())}e.pageData=Object.keys(e.page.data).reduce(function(n,a){return t(e.searchedData,a,o.data[a].value)&&(n[a]=o.data[a]),n},{})},e.$watch("searchedData",function(){e.filterPageData()}),e.openDataPopup=function(t){var n=a.open({templateUrl:"js/editor/data-panel/data-popup.html",controller:"DataPopupController",resolve:{mode:function(){return r},pageData:function(){return o.data},data:function(){return t&&angular.extend({},o.data[t],{$$name:t})}}});n.result.then(e.save)},e.openHelp=function(){return a.open({templateUrl:"js/editor/data-panel/help-popup.html",size:"lg"})}}]),angular.module("bonitasoft.designer.editor.data-panel").directive("validJson",function(){"use strict";return{require:"ngModel",link:function(e,t,n,a){a.$validators.validJson=function(e,t){if(a.$isEmpty(e))return!0;try{var n=angular.fromJson(t);return angular.isObject(n)||angular.isArray(n)}catch(o){return!1}}}}}),function(){"use strict";angular.module("bonitasoft.designer.editor").run(["whiteboardService","editorService",function(e,t){e.registerOnWidgetAddFunction(t.addWidgetAssetsToPage),e.registerOnWidgetRemoveFunction(t.removeAssetsFromPage)}])}(),angular.module("bonitasoft.designer.editor").controller("EditorCtrl",["$scope","$state","$stateParams","$window","artifactRepo","resolutions","artifact","mode","arrays","componentUtils","keymaster","$uibModal","utils","whiteboardService",function(e,t,n,a,o,r,i,s,l,c,u,d,p,m){"use strict";function f(t){var n=c.getVisibleComponents(e.page),a=n.indexOf(e.currentComponent)+t;a=p.clamp(0,a,n.length-1),e.$apply(function(){e.selectComponent(n[a])})}function g(e,t){var n=e.rows;if(n.length>1){var a=n.indexOf(t);n.splice(a,1),m.triggerRowRemoved(t)}}a.name="editor",e.mode=s||"page",e.page=i,e.resolution=function(){return r.selected()},u("del",function(){e.currentComponent&&e.$apply(function(){e.removeCurrentComponent()})}),u("right",function(){f(1)}),u("left",function(){f(-1)}),u("ctrl+s",function(){return e.$apply(function(){e.save()}),!1}),e.$on("$destroy",function(){u.unbind("del"),u.unbind("right"),u.unbind("left")}),e.componentClasses=function(e){var t=[c.column.className(e)];return t},e.selectRow=function(t,n,a){e.currentComponent=null,e.currentContainerRow={row:n,container:t},a&&a.stopPropagation()},e.dropElement=function(t){e.currentComponent=t,t.$$parentContainerRow=e.currentContainerRow,e.currentContainerRow.row.push(t),c.column.computeSizeItemInRow(e.currentContainerRow.row)},e.moveAtPosition=function(t,n){l.moveAtPosition(n,t,e.currentContainerRow.row),e.selectComponent(n)},e.selectComponent=function(t,n){e.currentContainerRow=null,e.currentComponent=t,n&&n.stopPropagation()},e.deselectComponent=function(){e.currentContainerRow=null,e.currentComponent=null,event&&event.stopPropagation()},e.addComponent=function(t,n){var a=t.create(e.currentContainerRow);l.insertAtPosition(a,n,e.currentContainerRow.row),c.column.computeSizeItemInRow(e.currentContainerRow.row),e.selectComponent(a),a.triggerAdded()},e.removeCurrentRow=function(){g(e.currentContainerRow.container,e.currentContainerRow.row),e.currentContainerRow=null},e.removeCurrentComponent=function(t,n){var a=e.currentComponent||t,o=a.$$parentContainerRow.row,r=o.indexOf(a);o.splice(r,1),0===o.length&&n!==o&&g(a.$$parentContainerRow.container,o),n||a.triggerRemoved(),e.currentComponent=null},e.isCurrentRow=function(t){return!!e.currentContainerRow&&e.currentContainerRow.row===t},e.isCurrentComponent=function(t){return!!e.currentComponent&&e.currentComponent===t},e.rowSize=function(e){var t=0;return angular.forEach(e,function(e){t+=c.column.width(e)}),t},e.saveAndEditCustomWidget=function(n){o.save(e.page).then(function(){t.go("designer.widget",{id:n})})},e.save=function(){return o.save(e.page)},e.canBeSaved=function(e){return!!e.name},e.appendComponent=function(t,n){if(!n.$$widget){c.isEmpty(e.page)||e.page.rows.push([]);var a=e.page.rows[e.page.rows.length-1];e.addComponentToRow(n,e.page,a,0)}},e.addComponentToRow=function(t,n,a,o){e.editor.selectRow(n,a),e.addComponent(t,o)},e.resizePaletteHandler=function(t,n){e.isPaletteClosed=t,e.isPaletteNarrow=n},e.editor={addComponentToRow:e.addComponentToRow,selectRow:e.selectRow,selectComponent:e.selectComponent,deselectComponent:e.deselectComponent,dropElement:e.dropElement,componentClasses:e.componentClasses,removeCurrentRow:e.removeCurrentRow,removeCurrentComponent:e.removeCurrentComponent,rowSize:e.rowSize,isCurrentRow:e.isCurrentRow,isCurrentComponent:e.isCurrentComponent,moveAtPosition:e.moveAtPosition,changeComponentWidth:e.changeComponentWidth,getComponentWidth:e.getComponentWidth,page:e.page}}]),function(){"use strict";function e(e,t,n,a,o,r,i,s,l,c,u){function d(e,t){x[e]=t}function p(n,o){return t.all().then(m).then(function(){var t=Object.keys(x).reduce(function(e,t){return e.concat(x[t](o))},[]);return e.all(t)}).then(function(){return n.load(o)}).catch(function(t){return s.addError(t.message),e.reject(t)}).then(function(e){return c.reset(),$=e.data,a.wrapPage($),$})}function m(e){function t(e,t){return t.custom===e}var a=e.filter(t.bind(null,!1)).map(f.bind(null,l("widgets"),1)),o=e.filter(t.bind(null,!0)).map(f.bind(null,l("custom widgets"),2));n.reset(),n.register(g()),n.register(a),n.register(o)}function f(e,t,n){var o=i.addCommonPropertiesTo(n);return{component:o,sectionName:e,sectionOrder:t,init:a.wrapWidget.bind(null,o),create:h.bind(null,o)}}function g(){var e=i.addCommonPropertiesTo(r.createContainerWidget()),t=i.addCommonPropertiesTo(r.createTabsContainerWidget()),n=i.addCommonPropertiesTo(r.createFormContainerWidget());return[{sectionName:l("widgets"),sectionOrder:1,component:e,init:a.wrapContainer.bind(null,e),create:b.bind(null,e)},{sectionName:l("widgets"),sectionOrder:1,component:t,init:a.wrapTabsContainer.bind(null,t),create:v.bind(null,t)},{sectionName:l("widgets"),sectionOrder:1,component:n,init:a.wrapFormContainer.bind(null,n),create:y.bind(null,n)}]}function h(e,t){var n=o.createWidgetElement(e);return a.wrapWidget(e,n,t)}function b(e,t){var n=o.createContainerElement(e);return a.wrapContainer(e,n,t)}function v(e,t){var n=o.createTabsContainerElement(e);return a.wrapTabsContainer(e,n,t)}function y(e,t){var n=o.createFormContainerElement(e);return a.wrapFormContainer(e,n,t)}function w(e){u.addWidgetAssetsToPage(e,$)}function C(e){c.contains(e)||u.removeAssetsFromPage(e,$)}var $,x={};return{addPalette:d,initialize:p,addWidgetAssetsToPage:w,removeAssetsFromPage:C}}e.$inject=["$q","widgetRepo","components","whiteboardComponentWrapper","pageElementFactory","containerDefinitionFactory","properties","alerts","gettext","whiteboardService","assetsService"],angular.module("bonitasoft.designer.editor").service("editorService",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t,n,a,o,r,i,s,l){"ngInject";_classCallCheck(this,e),this.mode=t,this.page=n,this.artifactRepo=a,this.$uibModal=o,this.$stateParams=r,this.$state=i,this.$window=s,this.browserHistoryService=l}return e.$inject=["mode","artifact","artifactRepo","$uibModal","$stateParams","$state","$window","browserHistoryService"],_createClass(e,[{key:"back",value:function(){var e=this;this.browserHistoryService.back(function(){return e.$state.go("designer.home")})}},{key:"save",value:function(e){return this.artifactRepo.save(e)}},{key:"saveAs",value:function(e){var t=this,n=this.$uibModal.open({templateUrl:"js/editor/header/save-as-popup.html",controller:"SaveAsPopUpController",controllerAs:"ctrl",resolve:{page:function(){return e}}});n.result.then(function(n){return t.artifactRepo.create(n,e.id)}).then(function(n){t.$stateParams.id=n.id,t.$state.go("designer."+e.type,t.$stateParams,{reload:!0})})}},{key:"saveAndExport",value:function(e){var t=this;this.artifactRepo.save(e).then(function(){return t.$window.location=t.artifactRepo.exportUrl(e)})}},{key:"openHelp",value:function(){var e=this;this.$uibModal.open({templateUrl:"js/editor/header/help-popup.html",size:"lg",resolve:{pageEdition:function(){return"page"===e.mode}},controller:["$scope","$uibModalInstance","pageEdition",function(e,t,n){"ngInject";e.pageEdition=n,e.cancel=function(){t.dismiss("cancel")}}]})}}]),e}();angular.module("bonitasoft.designer.editor.header").controller("EditorHeaderCtrl",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t,n){_classCallCheck(this,e),this.$uibModalInstance=t,this.page=n,this.newName=n.name}return e.$inject=["$uibModalInstance","page"],_createClass(e,[{key:"ok",value:function(){var e=angular.copy(this.page);e.name=this.newName,this.$uibModalInstance.close(e)}}]),e}();angular.module("bonitasoft.designer.editor.header").controller("SaveAsPopUpController",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{onResize:"&"},controller:"EditorPaletteCtrl",controllerAs:"palette",templateUrl:"js/editor/palette/editor-palette.html"}}function t(e,t){function n(e){l.currentSection=l.currentSection===e?void 0:e,o()}function a(e){return l.currentSection===e}function o(){e.onResize({isClosed:i(),isNarrow:r()})}function r(){return!!(l.currentSection&&l.currentSection.widgets.length<10)}function i(){return void 0===l.currentSection}function s(e){return"ui-"+e.name.replace(/ /g,"")}var l=this;this.sections=t.getSections(),this.currentSection=this.sections[0],this.toggleSection=n,this.isActiveSection=a,this.isNarrow=r,this.isClosed=i,this.getIconClassName=s,o()}t.$inject=["$scope","paletteService"],angular.module("bonitasoft.designer.editor.palette").controller("EditorPaletteCtrl",t).directive("editorPalette",e)}(),function(){"use strict";function e(){return{restrict:"EA",scope:{widget:"="},templateUrl:"js/editor/palette/palette-widget.html",link:function(e){e.$watch("widget.component.icon",function(t){var n='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 20"></svg>';e.iconData="data:image/svg+xml,"+encodeURIComponent(t||n)})}}}angular.module("bonitasoft.designer.editor.palette").directive("paletteWidget",e)}(),function(){"use strict";function e(e){function t(){var t=e.get(),n=Object.keys(t).reduce(function(e,n){var a=t[n].sectionName;return e[a]=e[a]||{name:a,order:t[n].sectionOrder,widgets:[]},e[a].widgets=e[a].widgets.concat(t[n]),e},{});return Object.keys(n).map(function(e){return n[e]})}return{getSections:t}}e.$inject=["components"],angular.module("bonitasoft.designer.editor.palette").service("paletteService",e)}(),angular.module("bonitasoft.designer.editor.properties-panel").controller("PropertyFieldDirectiveCtrl",["$scope","properties",function(e,t){"use strict";e.propertyValue=e.propertyValue||t.computeValue(e.property),e.isDisplayed=function(){return e.property.showFor?e.$eval(e.property.showFor):!0},e.getDataNames=function(){return Object.keys(e.pageData)};var n={};this.toggleExpressionEditor=function(){n.constant=n.constant||e.property.defaultValue,n[e.propertyValue.type]=e.propertyValue.value,e.propertyValue.type="expression"===e.propertyValue.type?"constant":"expression",e.propertyValue.value=n[e.propertyValue.type]},this.isExpression=function(){return"expression"===e.propertyValue.type};var a=["boolean","choice","collection","float","html","integer"];this.getFieldTemplate=function(e){var t=a.indexOf(e.type)>=0?e.type:"text";return"choice"===t&&angular.isObject(e.choiceValues[0])&&(t="choice-grouped"),"js/editor/properties-panel/field/"+t+".html"},this.getBondTemplate=function(e){return"js/editor/properties-panel/bond/"+e.bond+".html"}}]),angular.module("bonitasoft.designer.editor.properties-panel").directive("propertyField",function(){"use strict";return{restrict:"E",scope:{property:"=",propertyValue:"=",properties:"=",pageData:"="},templateUrl:"js/editor/properties-panel/property-field.html",controller:"PropertyFieldDirectiveCtrl",controllerAs:"propertyField"}}),function(){"use strict";angular.module("bonitasoft.designer.editor.whiteboard").directive("componentHighlighter",function(){return{restrict:"A",link:function(e,t,n){function a(e){for(var t=e.target;t.parentNode;){if(/\w-element/.test(t.className)){if(r===t)return;return r&&(r.className=r.className.replace(i,"").trim()),t.className+=" "+i,void(r=t)}t=t.parentNode}}function o(){r&&(r.className=r.className.replace(i,""),r=null)}var r,i=n.componentHighlighter,s=angular.element(t[0].querySelector(".widget-wrapper"));t.on("mouseover",a),s.on("mouseleave",o)}}})}(),function(){"use strict";function e(){function e(e){return t.hasOwnProperty(e)?t[e]+=1:t[e]=0,e+"-"+t[e]}var t={};return{getNextId:e}}angular.module("bonitasoft.designer.editor.whiteboard").service("componentId",e)}(),angular.module("bonitasoft.designer.editor.whiteboard").controller("ComponentMoverDirectiveCtrl",["$scope","arrays",function(e,t){function n(){return e.component&&e.component.hasOwnProperty("$$parentContainerRow")}var a=function(){return e.component.$$parentContainerRow.row};e.moveLeftVisible=function(){return n()&&t.moveLeftPossible(e.component,a())},e.moveRightVisible=function(){return n()&&t.moveRightPossible(e.component,a())},e.moveLeft=function(){t.moveLeft(e.component,a())},e.moveRight=function(){t.moveRight(e.component,a())}}]),angular.module("bonitasoft.designer.editor.whiteboard").directive("componentMover",function(){"use strict";return{restrict:"E",replace:!0,scope:{component:"=",onDelete:"&"},templateUrl:"js/editor/whiteboard/component-mover.html",controller:"ComponentMoverDirectiveCtrl"}}),angular.module("bonitasoft.designer.editor.whiteboard").factory("componentScopeBuilder",["dataFilter",function(e){"use strict";var t=function(t){var n=t.$new(!0);return n.environment={},n.environment.editor={pageId:t.editor&&t.editor.page&&t.editor.page.id},n.environment.component=t.component.$$widget,n.properties={},angular.forEach(t.component.propertyValues,function(a,o){t.$watch('component.propertyValues["'+o+'"].value',function(){var a=t.component.$$widget.properties.filter(function(e){return e.name===o}).map(function(e){return e.type}).pop()||"text";n.properties[o]=e(t.component.propertyValues[o],a)})}),n.range=function(e){return new Array(e)},n};return{build:t}}]),function(){"use strict";function e(e){function t(e){return e.container&&e.container.rows||[]}function n(e,t){return e.concat(t)}function a(e){return/container/i.test(e.type)}function o(e){var t=e.rows||e.$$openedTab&&e.$$openedTab.container.rows;return t.reduce(n,[]).reduce(function(e,t){return e=e.concat(t),a(t)?e.concat(o(t)):e},[])}function r(e,a){if(a.$$id===e)return!0;var o=a.rows||(a.tabs||[]).map(t).reduce(n,[]);return 0===o.length?!1:o.reduce(n,[]).some(function(t){return r(e,t)})}function i(e,t){var n=m.isChildOf(t.$$id,e);return n&&"component"!==e.type?!1:!(t.$$id===e.$$id||t===e)}function s(t){for(var n,a=e.all(),o=a.indexOf(e.selected()),r=o;r>=0;r--)if(n=a[r].key,t.dimension[n])return t.dimension[n];return 12}function l(e){return"col-xs-"+s(e)}function c(t){var n=e.all().indexOf(e.getDefaultResolution()),a=e.all().slice(n).map(function(e){return e.key}),o=Math.floor(12/t.length),r=12%t.length;a.forEach(function(e){var n=t.slice(0,-1).reduce(function(t,n){return t+n.dimension[e]},0),a=t[t.length-1];return 12>n?void(a.dimension[e]=12-n):(t.forEach(function(t){t.dimension[e]=o}),void(0!==r&&t.slice(-r).forEach(function(t){t.dimension[e]+=1
})))})}function u(t){return t?t.dimension[e.selected().key]:1}function d(t,n){t.dimension[e.selected().key]=n}function p(e){return!(e.rows||[]).some(function(e){return e.length>0})}var m={isEmpty:p,isChildOf:r,isMovable:i,getVisibleComponents:o,isContainer:a,column:{width:s,className:l,computeSizeItemInRow:c},width:{get:u,set:d}};return m}e.$inject=["resolutions"],angular.module("bonitasoft.designer.editor.whiteboard").service("componentUtils",e)}(),angular.module("bonitasoft.designer.editor.whiteboard").directive("component",["$compile","componentScopeBuilder",function(e,t){"use strict";return{restrict:"E",scope:{component:"=",editor:"=",componentIndex:"=",container:"=",row:"=",resizable:"="},link:function(n,a){var o=t.build(n);if(n.component.$$widget){var r=angular.element(a.get(0).querySelector(".widget-content")),i=e(n.component.$$widget.template)(o);r.append(i)}},templateUrl:"js/editor/whiteboard/component.html"}}]),angular.module("bonitasoft.designer.editor.whiteboard").controller("ContainerDirectiveCtrl",["$scope","$rootScope","arrays","componentUtils",function(e,t,n,a){"use strict";e.resizable=!0,e.moveRowUp=function(t,a){n.moveLeft(t,e.container.rows),a.stopPropagation()},e.moveRowDown=function(t,a){n.moveRight(t,e.container.rows),a.stopPropagation()},e.moveRowUpVisible=function(t){return n.moveLeftPossible(t,e.container.rows)},e.moveRowDownVisible=function(t){return n.moveRightPossible(t,e.container.rows)},e.dropItem=function(t,n){a.isMovable(t,e.component||e.container)&&(e.editor.selectRow(e.container,n),e.editor.removeCurrentComponent(t,n))},e.removeRow=function(t){e.editor.selectRow(e.container,t),e.editor.removeCurrentRow()},e.dropAtEndOfTheRow=function(t,n,o){if(o=o||[],t.$$widget){if(!a.isMovable(t,e.component||e.container))return;return e.editor.selectRow(e.container,o),void e.editor.dropElement(t)}e.editor.addComponentToRow(t,e.container,o)},e.dropBeforeRow=function(t,n,o,r){var i=e.component||e.container;(i.id||a.isMovable(t,i))&&r.splice(o,0,[]),e.dropAtEndOfTheRow(t,n,r[o])},e.dropAfterRow=function(t,n,o,r){var i=e.component||e.container;(i.id||a.isMovable(t,i))&&(o+=1,r.splice(o,0,[])),e.dropAtEndOfTheRow(t,n,r[o])},e.isEmpty=function(e){return a.isEmpty(e)},e.isRepeated=function(e){return e&&e.propertyValues&&e.propertyValues.repeatedCollection&&e.propertyValues.repeatedCollection.value}}]),angular.module("bonitasoft.designer.editor.whiteboard").directive("container",["RecursionHelper",function(e){"use strict";return{restrict:"E",scope:{id:"@",container:"=",editor:"=",component:"="},templateUrl:"js/editor/whiteboard/container.html",controller:"ContainerDirectiveCtrl",compile:function(t){return e.compile(t,function(){})}}}]),function(){"use strict";function e(e){return function(t,n){if(t&&t.value){if(e.isBound(t)){var a="data:"+t.value;return"collection"===n?[a]:a}return t.value}return""}}e.$inject=["properties"],angular.module("bonitasoft.designer.editor.whiteboard").filter("data",e)}(),angular.module("bonitasoft.designer.editor.whiteboard").directive("dropZone",["componentUtils",function(e){"use strict";return{template:'<div class="dropZone" bo-dropzone bo-drop-success="dropBefore($data)"></div><div class="dropZone dropZone--right" bo-dropzone bo-drop-success="dropAfter($data)"></div>',link:function(t){function n(e,n){var o=-1===t.row.indexOf(e),r=t.componentIndex;if(!a(e)){if(r||n||r++,o)t.editor.selectRow(t.container,e.$$parentContainerRow.row),t.editor.removeCurrentComponent(e),t.editor.selectRow(t.container,t.row),t.editor.dropElement(e),t.componentIndex&&!n&&r++;else{var i=t.row.length,s=t.row.indexOf(e);if(s===t.componentIndex)return;if(n&&0===s&&t.componentIndex!==i-1)return;if(s+1===t.componentIndex&&n)return;if(s-1===t.componentIndex&&!n)return;t.editor.selectRow(t.container,t.row),n&&t.componentIndex===i-1&&r--}t.editor.moveAtPosition(r,e)}}function a(n){return!e.isMovable(n,t.component)}function o(e,n){n="undefined"==typeof n?t.componentIndex:n,t.editor.addComponentToRow(e,t.container,t.row,n)}t.dropBefore=function(e){return e.$$widget?n(e,!0):void o(e)},t.dropAfter=function(e){return e.$$widget?n(e):void o(e,t.componentIndex+1)}}}}]),angular.module("bonitasoft.designer.editor.whiteboard").directive("formContainer",function(){"use strict";return{restrict:"E",scope:{id:"@",formContainer:"=",editor:"="},templateUrl:"js/editor/whiteboard/form-container.html"}}),function(){"use strict";function e(e,t){function n(n,a){return{type:n,dimension:e.getDefaultDimension(),propertyValues:t.computeValues(a.properties)}}function a(e){var t=n(o(e),e);return angular.extend(t,{id:e.id})}function o(e){return e.type&&"widget"!==e.type?e.type:"component"}function r(e){var t=n("container",e);return angular.extend(t,{rows:[[]]})}function i(e){var t=n("tabsContainer",e);return angular.extend(t,{tabs:["Tab 1","Tab 2"].map(s)})}function s(e){return{title:e,container:{type:"container",rows:[[]]}}}function l(e){var t=n("formContainer",e);return angular.extend(t,{container:{type:"container",rows:[[]]}})}return{createWidgetElement:a,createContainerElement:r,createTabsContainerElement:i,createFormContainerElement:l,createTabElement:s}}e.$inject=["resolutions","properties"],angular.module("bonitasoft.designer.editor.whiteboard").service("pageElementFactory",e)}(),angular.module("bonitasoft.designer.editor.whiteboard").controller("TabsContainerDirectiveCtrl",["$scope","arrays","whiteboardComponentWrapper","pageElementFactory",function(e,t,n,a){"use strict";e.openTab=function(t,n){e.tabsContainer.$$openedTab=t,e.editor.selectComponent(t,n)},e.isOpened=function(t){return e.tabsContainer.$$openedTab===t},e.tabsContainer.$$openedTab=e.tabsContainer.tabs[0],e.moveTabLeftVisible=function(n){return e.editor.isCurrentComponent(n)&&t.moveLeftPossible(n,e.tabsContainer.tabs)},e.moveTabRightVisible=function(n){return e.editor.isCurrentComponent(n)&&t.moveRightPossible(n,e.tabsContainer.tabs)},e.moveTabLeft=function(n){t.moveLeft(n,e.tabsContainer.tabs)},e.moveTabRight=function(n){t.moveRight(n,e.tabsContainer.tabs)},e.addTab=function(t){var o=e.tabsContainer.tabs,r=a.createTabElement("Tab "+(o.length+1));n.wrapTab(r,e.tabsContainer),o.push(r),e.openTab(r,t)},e.isRemoveTabVisible=function(t){return e.editor.isCurrentComponent(t)&&e.tabsContainer.tabs.length>1},e.removeTab=function(t,n){var a=e.tabsContainer.tabs,o=a.indexOf(t);o=o>=a.length?a.length-1:o;var r=0===o?0:o-1;a.splice(o,1),e.openTab(a[r],n),t.triggerRemoved()}}]),angular.module("bonitasoft.designer.editor.whiteboard").directive("tabsContainer",function(){"use strict";return{restrict:"E",scope:{tabsContainer:"=",editor:"="},controller:"TabsContainerDirectiveCtrl",templateUrl:"js/editor/whiteboard/tabs-container.html"}}),function(){"use strict";angular.module("bonitasoft.designer.editor.whiteboard").filter("uiTranslate",function(){return function(e){return e}})}(),function(){"use strict";function e(e,t,n){function a(e,n){var a={container:e,row:n};angular.forEach(n,function(e){t.init(e,a)})}function o(e){e.rows.forEach(a.bind(null,e))}function r(t,a,o){var r=angular.extend(a,{$$id:n.getNextId("component"),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/component-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/component-properties-template.html",$$parentContainerRow:o,triggerRemoved:e.onRemoveWidget.bind(null,a),triggerAdded:e.onAddWidget.bind(null,a)});return e.triggerInitWidget(r),r}function i(t,o,r){var i=angular.extend(o,{$$id:n.getNextId("container"),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/container-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/container-properties-template.html",$$parentContainerRow:r,triggerRemoved:e.onRemoveContainer.bind(null,o),triggerAdded:angular.noop});return i.rows.forEach(a.bind(null,o)),i}function s(t,a,o){var r=angular.extend(a,{$$id:n.getNextId("tabsContainer"),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/tabs-container-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/component-properties-template.html",$$parentContainerRow:o,triggerRemoved:e.onRemoveTabsContainer.bind(null,a),triggerAdded:angular.noop});return a.tabs.forEach(function(e){u.wrapTab(e,a),u.wrapContainer({},e.container)}),r}function l(t,n){angular.extend(t,{$$parentTabsContainer:n,$$widget:{name:"Tab"},$$propertiesTemplateUrl:"js/editor/properties-panel/tab-properties-template.html",triggerRemoved:e.onRemoveTab.bind(null,t),triggerAdded:angular.noop})}function c(t,a,o){var r=angular.extend(a,{$$id:n.getNextId("formContainer"),$$widget:angular.copy(t),$$templateUrl:"js/editor/whiteboard/form-container-template.html",$$propertiesTemplateUrl:"js/editor/properties-panel/component-properties-template.html",$$parentContainerRow:o,triggerRemoved:e.onRemoveFormContainer.bind(null,a),triggerAdded:angular.noop});return u.wrapContainer({},a.container),r}var u={wrapPage:o,wrapWidget:r,wrapContainer:i,wrapTabsContainer:s,wrapTab:l,wrapFormContainer:c};return u}e.$inject=["whiteboardService","components","componentId"],angular.module("bonitasoft.designer.editor.whiteboard").service("whiteboardComponentWrapper",e)}(),function(){"use strict";function e(e,t){function n(){b=[]}function a(e){return b.indexOf(e.id)>-1}function o(e){g.push(e)}function r(e){h.push(e)}function i(e){t.removeFirst(e.id,b),c(g,e)}function s(e){c(h,e)}function l(e){b.push(e.id)}function c(t,n){t.forEach(function(t){e(t.bind(null,n),0)})}function u(e){angular.forEach(e,function(e){e.triggerRemoved()})}function d(e){e.rows.forEach(u)}function p(e){e.tabs.forEach(m)}function m(e){d(e.container)}function f(e){d(e.container)}var g=[],h=[],b=[];return{registerOnWidgetRemoveFunction:o,registerOnWidgetAddFunction:r,triggerRowRemoved:u,triggerInitWidget:l,onAddWidget:s,onRemoveWidget:i,onRemoveContainer:d,onRemoveTabsContainer:p,onRemoveTab:m,onRemoveFormContainer:f,contains:a,reset:n}}e.$inject=["$timeout","arrays"],angular.module("bonitasoft.designer.editor.whiteboard").service("whiteboardService",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.factories={page:{key:"page",state:"page",value:t("Application page"),filterName:t("Pages"),create:function(e){return n.createPage(e,"page")}},form:{key:"form",state:"page",value:t("Process form"),tooltip:t("You should start process form design in the studio: from the appropriate pool or human task, create a contract and launch the UI Designer. It will auto-generate a dedicated form to edit."),filterName:t("Forms"),create:function(e){return n.createPage(e,"form")}},layout:{key:"layout",state:"page",value:t("Application layout"),filterName:t("Layouts"),create:function(e){return n.createPage(e,"layout")}},widget:{key:"widget",state:"widget",value:t("Custom widget"),filterName:t("Custom widgets"),create:function(e){return n.createWidget(e)},hasUniqueName:!0}}}return _createClass(e,[{key:"getFactory",value:function(e){return this.factories[e]}},{key:"getFactories",value:function(){return this.factories}},{key:"createPage",value:function(e,t){return{type:t,name:e,rows:[[]]}}},{key:"createWidget",value:function(e){var t='<!-- The custom widget template is defined here\n   - You can use standard HTML tags and AngularJS built-in directives, scope and interpolation system\n   - Custom widget properties defined on the right can be used as variables in a templates with properties.newProperty\n   - Functions exposed in the controller can be used with ctrl.newFunction()\n   - You can use the \'environment\' property injected in the scope when inside the Editor whiteboard. It allows to define a mockup\n     of the Custom Widget to be displayed in the whiteboard only. By default the widget is represented by an auto-generated icon\n     and its name (See the <span> below).\n-->\n \n<span ng-if="environment"><identicon name="{{environment.component.id}}" size="30" background-color="[255,255,255, 0]" foreground-color="[51,51,51]"></identicon> {{environment.component.name}}</span>\n\n<div style="color: {{ properties.color }}; background-color: {{ backgroudColor }}" ng-click="ctrl.toggleBackgroundColor()">\n    Value is:  <i>{{ properties.value }}</i>. Click me to toggle background color\n</div>',n="/**\n * The controller is a JavaScript function that augments the AngularJS scope and exposes functions that can be used in the custom widget template\n * \n * Custom widget properties defined on the right can be used as variables in a controller with $scope.properties\n * To use AngularJS standard services, you must declare them in the main function arguments.\n * \n * You can leave the controller empty if you do not need it.\n */\nfunction ($scope) {\n    var white = 'white';\n    \n    // add a new variable in AngularJS scope. It'll be usable in the template directly with {{ backgroudColor }} \n    $scope.backgroudColor = white;\n    \n    // define a function to be used in template with ctrl.toggleBackgroundColor()\n    this.toggleBackgroundColor = function() {\n        if ($scope.backgroudColor === white) {\n           // use the custom widget property backgroudColor with $scope.properties.backgroudColor\n            $scope.backgroudColor = $scope.properties.background;\n        } else {\n            $scope.backgroudColor = white;\n        }\n    };\n}";return{name:e,type:"widget",template:t,controller:n,custom:!0,properties:[{label:"Value",name:"value",type:"text",defaultValue:"This is the initial value"},{label:"Color",name:"color",type:"choice",defaultValue:"RebeccaPurple",choiceValues:["RebeccaPurple","Chartreuse","Tomato","DeepSkyBlue"]},{label:"Background color on click",name:"background",type:"choice",defaultValue:"Yellow",choiceValues:["Yellow","LightGray"]}]}}}]),e}();angular.module("bonitasoft.designer.home").factory("artifactFactories",["gettext",function(t){return new e(t)}])}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t,n,a,o){_classCallCheck(this,e),this.$uibModal=t,this.$timeout=n,this.getRepository=function(e){return a.get(e)},this.gettextCatalog=o}return e.$inject=["$uibModal","$timeout","repositories","gettextCatalog"],_createClass(e,[{key:"translateKeys",value:function(e){return{Delete:this.gettextCatalog.getString("Delete"),Export:this.gettextCatalog.getString("Export"),Rename:this.gettextCatalog.getString("Rename"),"Last Update:":this.gettextCatalog.getString("Last Update:")}[e]||e}},{key:"deleteArtifact",value:function(e){var t=this,n=angular.isDefined(e.usedBy)?"js/home/artifact-list/alert-deletion-notpossible-popup.html":"js/home/artifact-list/confirm-deletion-popup.html",a=this.$uibModal.open({templateUrl:n,windowClass:"modal-centered",controller:"DeletionPopUpController",resolve:{artifact:function(){return e},type:function(){return e.type}}});a.result.then(function(n){return t.getRepository(e.type).delete(n)}).then(this.refreshAll)}},{key:"toggleItemEdition",value:function(e){this.editionIndex=this.editionIndex?void 0:e}},{key:"isInEditionMode",value:function(e){return this.editionIndex===e}},{key:"renameItem",value:function(e){var t=this;e.newName!==e.name&&this.getRepository(e.type).rename(e.id,e.newName).catch(function(){return e.newName=e.name}).finally(function(){return e.name=e.newName}),this.$timeout(function(){return t.editionIndex=void 0},100)}}]),e}();angular.module("bonitasoft.designer.home").directive("artifactList",function(){return{controller:e,controllerAs:"artifactList",scope:!0,bindToController:{all:"=*artifacts",refreshAll:"="},templateUrl:"js/home/artifact-list/artifact-list.html"}})}(),angular.module("bonitasoft.designer.home").controller("DeletionPopUpController",["$scope","$uibModalInstance","artifact","type",function(e,t,n,a){"use strict";e.artifact=n,e.artifact.type=a,e.ok=function(){t.close(e.artifact.id)},e.cancel=function(){t.dismiss("cancel")}}]),function(){"use strict";function e(){return{scope:{artifact:"=",repository:"=artifactRepository"},controller:t,controllerAs:"vm",bindToController:!0,replace:!0,templateUrl:"js/home/artifact-list/favorite-button.html"}}function t(){var e=this;e.toggleFavorite=function(){e.artifact.favorite?e.repository.unmarkAsFavorite(e.artifact.id):e.repository.markAsFavorite(e.artifact.id),e.artifact.favorite=!e.artifact.favorite},e.isFavorite=function(){return e.artifact.favorite}}angular.module("bonitasoft.designer.home").directive("favoriteButton",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t,n,a){_classCallCheck(this,e),this.$q=t,this.repositories=[n,{all:function(){return a.customs()}}]}return e.$inject=["$q","pageRepo","widgetRepo"],_createClass(e,[{key:"load",value:function(){return this.$q.all(this.repositories.map(function(e){return e.all()})).then(function(e){var t;return(t=[]).concat.apply(t,_toConsumableArray(e))})}},{key:"registerRepository",value:function(e){this.repositories.push(e)}}]),e}();angular.module("bonitasoft.designer.home").service("artifactStore",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t,n,a,o){_classCallCheck(this,e),this.repositories=n,this.$state=a,this.$scope=t,this.types=o.getFactories(),this.type=this.types.page}return e.$inject=["$scope","repositories","$state","artifactFactories"],_createClass(e,[{key:"close",value:function(){this.isOpen=!1}},{key:"isNameUniqueIfRelevantForType",value:function(e,t){return t.hasUniqueName&&(this.artifacts||[]).filter(function(e){return e.type===t.key}).some(function(t){return t.name===e})}},{key:"create",value:function(e,t){var n=this;this.repositories.get(e.key).create(e.create(t)).then(function(t){return n.$state.go("designer."+e.key,{id:t.id})})}}]),e}();angular.module("bonitasoft.designer.home").directive("uidCreateArtifact",function(){return{scope:!0,require:"^HomeCtrl",templateUrl:"js/home/create/home-create.html",controller:e,bindToController:{artifacts:"="},controllerAs:"createCtrl"}})}(),function(){"use strict";var e=function t(e,n,a,o,r,i){function s(t){e.types.forEach(function(n){return e.artifacts[n.id]=r("filter")(t||[],{name:e.search,type:n.id})})}_classCallCheck(this,t),e.artifacts={},e.refreshAll=function(){return a.load().then(function(t){return e.artifacts.all=t}).then(function(e){return e.map(function(e){return e.editionUrl=i.href("designer."+e.type,{id:e.id}),e})}).then(s)},e.openHelp=function(){return n.open({templateUrl:"js/home/help-popup.html",size:"lg"})};var l=o.getFactories();e.types=Object.keys(l).map(function(e){return{id:e,name:l[e].filterName}}),e.search="",e.$watch("search",function(){return s(e.artifacts.all)}),e.refreshAll()};e.$inject=["$scope","$uibModal","artifactStore","artifactFactories","$filter","$state"],angular.module("bonitasoft.designer.home").controller("HomeCtrl",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t,n,a){_classCallCheck(this,e),this.$uibModal=t,this.$scope=n,this.importArtifactService=a,this.type="artifact",this.url="import/artifact",this.filename="",this.popupTitle="Import a UI Designer artifact"}return e.$inject=["$uibModal","$scope","importArtifactService"],_createClass(e,[{key:"close",value:function(){this.isOpen=!1,this.filename=""}},{key:"onComplete",value:function(e){var t=this,n=this.importArtifactService.manageImportResponse(this.type,!0,e);n.finally(function(){return t.close()}),n.then(function(e){return!!e&&t.manageImportReport(e)}).then(this.$scope.refreshAll)}},{key:"manageImportReport",value:function(e){return this.$uibModal.open({templateUrl:"js/home/import/import-report-popup.html",controller:"ImportReportPopupController",controllerAs:"importReport",resolve:{importReport:function(){return e}}}).result}}]),e}();angular.module("bonitasoft.designer.home").directive("uidImportArtifact",function(){return{scope:!0,templateUrl:"js/home/import/home-import.html",controller:e,controllerAs:"import"}})}(),function(){"use strict";function e(e,t){function n(t,n){var r=o[t.type]||{cause:t.message},i={consequence:a(n)};return Object.keys(r).forEach(function(n){return i[n]=e.getString(r[n],t)}),i}function a(n){return n=n||t("artifact"),"page"===n?t("The page has not been imported."):"widget"===n?t("The widget has not been imported."):e.getString("The {{ artifactType }} has not been imported.",{artifactType:e.getString(n)})}var o={SERVER_ERROR:{cause:t("A server error occurred."),additionalInfos:t("Check the log files")},PAGE_NOT_FOUND:{cause:t("Incorrect zip structure."),additionalInfos:t("Check that the zip archive contains the file {{ infos.modelfile }}.")},MODEL_NOT_FOUND:{cause:t("Incorrect zip structure."),additionalInfos:t("Check that the zip archive contains one of following files {{ infos.modelfiles }}.")},UNEXPECTED_ZIP_STRUCTURE:{cause:t("Incorrect zip structure."),additionalInfos:t("Check that the zip file structure matches a standard UI Designer export.")},CANNOT_OPEN_ZIP:{cause:t("Corrupted zip archive.")},JSON_STRUCTURE:{cause:t("Invalid {{ infos.modelfile }} json file structure"),additionalInfos:t("Check that the json file structure matches a standard UI Designer export.")}};return{getErrorContext:n}}e.$inject=["gettextCatalog","gettext"],angular.module("bonitasoft.designer.home.import").service("importErrorMessagesService",e)}(),function(){"use strict";function e(){return{templateUrl:"js/home/import/import-report-item-list.html",scope:{pageName:"=",type:"=",displayPage:"=",dependencies:"="},controller:["$scope",function(e){e.joinOnNames=function(e){return e&&e.map(function(e){return e.name}).join(", ")}}]}}angular.module("bonitasoft.designer.home.import").directive("importReportItemList",e)}();var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();!function(){"use strict";var e=function(){function e(t,n,a){_classCallCheck(this,e),this.$uibModalInstance=t,this.importArtifactService=a,this.report=n}return e.$inject=["$uibModalInstance","importReport","importArtifactService"],_createClass(e,[{key:"joinOnNames",value:function(e){return e.map(function(e){return e.name}).join(", ")}},{key:"forceImport",value:function(){this.importArtifactService.forceImport(this.report).then(this.$uibModalInstance.close,this.$uibModalInstance.dismiss)}},{key:"hasDependencies",value:function(){return this.report.dependencies&&this.report.dependencies.added||this.report.dependencies.overridden}},{key:"type",get:function(){return this.report.element.type||"widget"}},{key:"name",get:function(){return this.report.element.name}}]),e}();angular.module("bonitasoft.designer.home.import").controller("ImportReportPopupController",e)}(),function(){function e(e,t){function n(e){return e.map(function(e){return e.name}).join(", ")}function a(){return t.getString(e.overridden?"overridden":"added")}var o=this;o.joinOnNames=n,o.getState=a}e.$inject=["$scope","gettextCatalog"],angular.module("bonitasoft.designer.home.import").controller("ImportSuccessMessageController",e)}(),function(){"use strict";function e(e,t,n,a,o){function r(e){return e&&e.type&&e.message}function i(a,r,i){var s=n.defer();if(c.isErrorResponse(i))e.addError({title:t.getString("Import error"),contentUrl:"js/home/import/import-error-message.html",context:o.getErrorContext(i,a)}),s.reject();else{var l=angular.extend(i,{type:i.element.type||"widget"});!r||c.doesImportOverrideExistingContent(i)?(e.addSuccess({title:t.getString("Successful import"),contentUrl:"js/home/import/import-success-message.html",context:l},15e3),s.resolve()):s.resolve(l)}return s.promise}function s(e){return!(e.overridden||e.dependencies&&e.dependencies.overridden)}function l(e){var t=e.element.type||"widget";return a.forceImport(e.uuid).then(c.manageImportResponse.bind(c,t,!1))}var c={forceImport:l,isErrorResponse:r,manageImportResponse:i,doesImportOverrideExistingContent:s};return c}e.$inject=["alerts","gettextCatalog","$q","importRepo","importErrorMessagesService"],angular.module("bonitasoft.designer.home.import").service("importArtifactService",e)}(),angular.module("bonitasoft.designer.preview").directive("openPreview",["$window","$state","resolutions",function(e,t,n){"use strict";return{link:function(a,o,r){function i(){e.open(t.href(c,{resolution:n.selected().key}),"_blank",l)}var s="width=pWidth,height=pHeight,resizable=1,scrollbars=1",l=s.replace(/pWidth/,r.popupWidth||1024).replace(/pHeight/,r.popupHeight||768),c="designer."+(r.openPreview||"page")+".preview";o.on("click",i),a.$on("$destroy",function(){o.off("click",i)})}}}]),function(){"use strict";function e(e,t,n,a,o,r,i){function s(){return t.trustAsResourceUrl(n.url+"/"+n.id+"/?time="+r.now())}function l(){return a.selected().width}function c(){e.iframe.src=s()}e.iframe={},e.refreshIframe=c,e.buildIframeSrc=s,e.iframeWidth=l,i.load(n.id).then(function(t){e.pageName=t.data.name}),c(),o.listen("/previewableUpdates",function(e){e===n.id&&c()})}e.$inject=["$scope","$sce","iframeParameters","resolutions","webSocket","clock","artifactRepo"],angular.module("bonitasoft.designer.preview").controller("PreviewCtrl",e)}(),angular.module("bonitasoft.designer.preview").factory("webSocket",["$rootScope","$log",function(e,t){"use strict";var n=function(n,a){var o=new SockJS("websockets"),r=Stomp.over(o),i=function(t){e.$apply(function(){a(t.body)})},s=function(){r.subscribe(n,i)},l=function(){t.error("error connecting to notifications web socket for topic "+n)};r.connect("",s,l)};return{listen:n}}]),function(){"use strict";angular.module("app.route",["tmh.dynamicLocale"]).config(["tmhDynamicLocaleProvider",function(e){e.localeLocationPattern("locales/angular-locale_{{locale}}.js")}]).constant("appStates",{designer:{"abstract":!0,url:"/:lang",template:"<ui-view></ui-view>",resolve:{language:["$stateParams","gettextCatalog","tmhDynamicLocale",function(e,t,n){var a={en:{lang:"en"},fr:{lang:"fr",file:"lang-template-fr-FR.json"},es:{lang:"es-ES",file:"lang-template-es-ES.json"},"es-ES":{lang:"es-ES",file:"lang-template-es-ES.json"},ja:{lang:"ja",file:"lang-template-ja-JP.json"}},o=a[Object.keys(a).reduce(function(t,n){return e.lang===n?n:t})];return t.setCurrentLanguage(o.lang),o!==a.en?(n.set(o.lang),t.loadRemote("i18n/"+o.file)):void 0}]}},"designer.home":{url:"/home",views:{"@designer":{controller:"HomeCtrl",templateUrl:"js/home/home.html"}}},"designer.layout":{url:"/layouts/:id",controller:["$state","$stateParams",function(e,t){return e.go("designer.page",t,{location:!1})}]},"designer.form":{url:"/forms/:id",controller:["$state","$stateParams",function(e,t){return e.go("designer.page",t,{location:!1})}]},"designer.page":{url:"/pages/:id",resolve:{artifact:["editorService","pageRepo","$stateParams",function(e,t,n){return e.initialize(t,n.id)}],artifactRepo:["pageRepo",function(e){return e}],mode:function(){return"page"}},views:{"@designer":{controller:"EditorCtrl",templateUrl:"js/editor/editor.html"},"data@designer.page":{controller:"DataCtrl",templateUrl:"js/editor/data-panel/data.html"},"header@designer.page":{controller:"EditorHeaderCtrl",controllerAs:"vm",templateUrl:"js/editor/header/header.html"}}},"designer.page.asset":{views:{"data@designer.page":{controller:"AssetCtrl",controllerAs:"vm",templateUrl:"js/assets/page-assets.html"}}},"designer.page.preview":{url:"/preview",views:{"@designer":{controller:"PreviewCtrl",templateUrl:"js/preview/preview.html"}},resolve:{iframeParameters:["$stateParams",function(e){return{url:"preview/page",id:e.id}}],artifactRepo:["pageRepo",function(e){return e}]}},"designer.widget":{url:"/widget/:id",resolve:{artifact:["widgetRepo","$stateParams",function(e,t){return e.load(t.id).then(function(e){return e.data})}],artifactRepo:["widgetRepo",function(e){return e}],mode:function(){return"widget"}},views:{"@designer":{controller:"CustomWidgetEditorCtrl",templateUrl:"js/custom-widget/custom-widget-editor.html"},"asset@designer.widget":{controller:"AssetCtrl",controllerAs:"vm",templateUrl:"js/assets/widget-assets.html"}}}})}();